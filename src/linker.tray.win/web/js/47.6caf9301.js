"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[47],{9232:function(e,t,a){a.d(t,{W4:function(){return r},q:function(){return n},uQ:function(){return o}});var l=a(4);const n=e=>(0,l.zG)("relay/SetServers",e),r=()=>(0,l.zG)("relay/Subscribe"),o=e=>(0,l.zG)("relay/Connect",e)},743:function(e,t,a){a.d(t,{Ap:function(){return n},Co:function(){return r},DY:function(){return u},Qs:function(){return c},a9:function(){return s},eX:function(){return i},gz:function(){return d},pY:function(){return o}});var l=a(4);const n=()=>(0,l.zG)("sforward/GetSecretKey"),r=e=>(0,l.zG)("sforward/SetSecretKey",e),o=e=>(0,l.zG)("sforward/get",e),s=()=>(0,l.zG)("sforward/refresh"),d=(e="0")=>(0,l.zG)("sforward/getcount",e),u=e=>(0,l.zG)("sforward/remove",e),c=e=>(0,l.zG)("sforward/add",e),i=e=>(0,l.zG)("sforward/TestLocal",e)},920:function(e,t,a){a.d(t,{BJ:function(){return c},Ce:function(){return v},NS:function(){return o},PY:function(){return u},UB:function(){return m},aP:function(){return h},ir:function(){return d},lJ:function(){return r},mK:function(){return n},y2:function(){return i},yN:function(){return s}});var l=a(4);const n=(e="0")=>(0,l.zG)("updater/get",e),r=e=>(0,l.zG)("updater/confirm",e),o=e=>(0,l.zG)("updater/exit",e),s=()=>(0,l.zG)("updater/GetSecretKey"),d=e=>(0,l.zG)("updater/SetSecretKey",e),u=e=>(0,l.zG)("updater/SetInterval",e),c=()=>(0,l.zG)("updater/getserver"),i=e=>(0,l.zG)("updater/confirmserver",e),h=()=>(0,l.zG)("updater/exitserver"),m=()=>(0,l.zG)("updater/Subscribe"),v=e=>(0,l.zG)("updater/check",e)},2047:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var l=a(6768);const n={class:"servers-wrap"};function r(e,t,a,r,o,s){const d=(0,l.g2)("SignInServers"),u=(0,l.g2)("el-tab-pane"),c=(0,l.g2)("Async"),i=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(i,{type:"border-card",style:{width:"100%"},modelValue:r.state.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.tab=e)},{default:(0,l.k6)((()=>[r.hasConfig?((0,l.uX)(),(0,l.Wv)(u,{key:0,label:e.$t("server.messenger"),name:"signin"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1},8,["label"])):(0,l.Q3)("",!0),r.hasSync?((0,l.uX)(),(0,l.Wv)(u,{key:1,label:e.$t("server.sync"),name:"async"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1},8,["label"])):(0,l.Q3)("",!0)])),_:1},8,["modelValue"])])}var o=a(144),s=a(3830),d=a(4232);const u={class:"flex"},c={class:"flex"},i={class:"t-c"};function h(e,t,a,n,r,o){const s=(0,l.g2)("el-input"),h=(0,l.g2)("el-form-item"),m=(0,l.g2)("RelayServers"),v=(0,l.g2)("SForward"),p=(0,l.g2)("Updater"),y=(0,l.g2)("el-form"),g=(0,l.g2)("el-button"),b=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",{class:"signin-wrap",style:(0,d.Tr)({height:`${n.state.height}px`})},[(0,l.bF)(b,{shadow:"never"},{header:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.$t("server.messenger")),1)])),footer:(0,l.k6)((()=>[(0,l.Lk)("div",i,[(0,l.bF)(g,{type:"success",onClick:n.handleSave},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(y,{"label-width":"auto"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{label:e.$t("server.messengerAddr")},{default:(0,l.k6)((()=>[(0,l.Lk)("div",u,[(0,l.bF)(s,{class:"flex-1",modelValue:n.state.list.Host,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.list.Host=e),onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,l.Lk)("span",null,(0,d.v_)(e.$t("server.messengerText")),1)])])),_:1},8,["label"]),(0,l.bF)(h,{label:e.$t("server.messengerSecretKey")},{default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.bF)(s,{class:"flex-1",type:"password","show-password":"",maxlength:"36",modelValue:n.state.list.SecretKey,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.list.SecretKey=e),onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,l.Lk)("span",null,(0,d.v_)(e.$t("server.messengerSecretKeyText")),1)])])),_:1},8,["label"]),(0,l.bF)(m),(0,l.bF)(v),(0,l.bF)(p)])),_:1})])])),_:1})],4)}var m=a(9299),v=a(1219);const p={class:"flex"};function y(e,t,a,n,r,o){const s=(0,l.g2)("el-input"),u=(0,l.g2)("el-form-item");return(0,l.uX)(),(0,l.Wv)(u,{label:e.$t("server.sforwardSecretKey")},{default:(0,l.k6)((()=>[(0,l.Lk)("div",p,[(0,l.bF)(s,{class:"flex-1",type:"password","show-password":"",modelValue:n.state.SForwardSecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.SForwardSecretKey=e),maxlength:"36",onBlur:n.handleChange},null,8,["modelValue","onBlur"]),(0,l.Lk)("span",null,(0,d.v_)(e.$t("server.sforwardText")),1)])])),_:1},8,["label"])}var g=a(743),b=a(5931),f={setup(e){const{t:t}=(0,b.s9)(),a=(0,o.Kh)({SForwardSecretKey:""}),n=()=>{(0,g.Ap)().then((e=>{a.SForwardSecretKey=e}))},r=()=>{a.SForwardSecretKey&&(0,g.Co)(a.SForwardSecretKey).then((()=>{v.nk.success(t("common.oper"))})).catch((e=>{console.log(e),v.nk.error(t("common.operFail"))}))},s=()=>{r()};return(0,l.sV)((()=>{n()})),{state:a,handleChange:s}}},k=a(1241);const S=(0,k.A)(f,[["render",y]]);var w=S;const C={class:"flex"};function F(e,t,a,n,r,o){const s=(0,l.g2)("el-input"),u=(0,l.g2)("el-form-item"),c=(0,l.g2)("el-input-number");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(u,{label:e.$t("server.updaterSecretKey")},{default:(0,l.k6)((()=>[(0,l.Lk)("div",C,[(0,l.bF)(s,{class:"flex-1",type:"password","show-password":"",modelValue:n.state.secretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.secretKey=e),maxlength:"36",onBlur:n.handleChange},null,8,["modelValue","onBlur"]),(0,l.Lk)("span",null,(0,d.v_)(e.$t("server.updaterText")),1)])])),_:1},8,["label"]),(0,l.bF)(u,{label:e.$t("server.updaterRate")},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",null,[(0,l.bF)(c,{modelValue:n.state.year,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.year=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterY"))+" ",1),(0,l.bF)(c,{modelValue:n.state.month,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.month=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterM"))+" ",1),(0,l.bF)(c,{modelValue:n.state.day,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.day=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterD")),1)]),(0,l.Lk)("div",null,[(0,l.bF)(c,{modelValue:n.state.hour,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.hour=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterH"))+" ",1),(0,l.bF)(c,{modelValue:n.state.min,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.min=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterMM"))+" ",1),(0,l.bF)(c,{modelValue:n.state.sec,"onUpdate:modelValue":t[6]||(t[6]=e=>n.state.sec=e),min:0,max:99,style:{width:"12rem"},onChange:n.handleSecChange},null,8,["modelValue","onChange"]),(0,l.eW)(" "+(0,d.v_)(e.$t("server.updaterS")),1)])])])),_:1},8,["label"])],64)}var V=a(920),_={setup(e){const{t:t}=(0,b.s9)(),a=(0,s.B)(),n=(0,o.Kh)({secretKey:"",year:0,month:0,day:0,hour:0,min:1,sec:0}),r=()=>{(0,V.yN)().then((e=>{n.secretKey=e}))},d=()=>{n.secretKey&&(0,V.ir)(n.secretKey).then((()=>{v.nk.success(t("common.oper"))})).catch((e=>{console.log(e),v.nk.error(t("common.operFail"))}))},u=()=>{const e=31536e3*n.year+2592e3*n.month+86400*n.day+3600*n.hour+60*n.min+n.sec;(0,V.PY)(e).then((()=>{v.nk.success(t("common.oper"))})).catch((e=>{console.log(e),v.nk.error(t("common.operFail"))}))},c=()=>{u()},i=()=>{d()};return(0,l.sV)((()=>{r();let e=a.value.config.Common.UpdateIntervalSeconds;n.year=Math.floor(e/31536e3),e%=31536e3,n.month=Math.floor(e/2592e3),e%=2592e3,n.day=Math.floor(e/86400),e%=86400,n.hour=Math.floor(e/3600),e%=3600,n.min=Math.floor(e/60),e%=60,n.sec=e})),{state:n,handleChange:i,handleSecChange:c}}};const K=(0,k.A)(_,[["render",F]]);var x=K;const $={key:0},G={key:1},z={key:0},U={key:1},L={key:0},B={key:1};function T(e,t,a,n,r,o){const s=(0,l.g2)("el-input"),u=(0,l.g2)("el-checkbox"),c=(0,l.g2)("el-form-item"),i=(0,l.g2)("el-table-column"),h=(0,l.g2)("el-switch"),m=(0,l.g2)("el-table"),v=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(c,{label:e.$t("server.relaySecretKey")},{default:(0,l.k6)((()=>[(0,l.bF)(s,{type:"password","show-password":"",modelValue:n.state.list.SecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.list.SecretKey=e),maxlength:"36",onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,l.bF)(u,{modelValue:n.state.list.SSL,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.list.SSL=e),label:e.$t("server.relaySSL"),size:"large",onChange:n.handleSave},null,8,["modelValue","label","onChange"]),(0,l.bF)(u,{modelValue:n.state.list.Disabled,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.list.Disabled=e),label:e.$t("server.relayDisable"),size:"large",onChange:n.handleSave},null,8,["modelValue","label","onChange"]),(0,l.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.state.show=!0),class:(0,d.C4)(["delay a-line",{red:0==n.state.nodes.length,green:n.state.nodes.length>0}])},(0,d.v_)(e.$t("server.relayNodes"))+" : "+(0,d.v_)(n.state.nodes.length),3)])),_:1},8,["label"]),(0,l.bF)(v,{modelValue:n.state.show,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.show=e),title:e.$t("server.relayTitle"),width:"760",top:"2vh"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(m,{data:n.state.nodes,size:"small",border:"",height:"500"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{property:"Name",label:e.$t("server.relayName")},null,8,["label"]),(0,l.bF)(i,{property:"MaxGbTotal",label:e.$t("server.relayFlow"),width:"160"},{default:(0,l.k6)((e=>[0==e.row.MaxGbTotal?((0,l.uX)(),(0,l.CE)("span",$,"--")):((0,l.uX)(),(0,l.CE)("span",G,(0,d.v_)((e.row.MaxGbTotalLastBytes/1024/1024/1024).toFixed(2))+"GB / "+(0,d.v_)(e.row.MaxGbTotal)+"GB",1))])),_:1},8,["label"]),(0,l.bF)(i,{property:"MaxBandwidth",label:e.$t("server.relaySpeed"),width:"80"},{default:(0,l.k6)((e=>[0==e.row.MaxBandwidth?((0,l.uX)(),(0,l.CE)("span",z,"--")):((0,l.uX)(),(0,l.CE)("span",U,(0,d.v_)(e.row.MaxBandwidth)+"Mbps",1))])),_:1},8,["label"]),(0,l.bF)(i,{property:"MaxBandwidthTotal",label:e.$t("server.relaySpeed1"),width:"80"},{default:(0,l.k6)((e=>[0==e.row.MaxBandwidthTotal?((0,l.uX)(),(0,l.CE)("span",L,"--")):((0,l.uX)(),(0,l.CE)("span",B,(0,d.v_)(e.row.MaxBandwidthTotal)+"Mbps",1))])),_:1},8,["label"]),(0,l.bF)(i,{property:"BandwidthRatio",label:e.$t("server.relaySpeed2"),width:"66"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,d.v_)((100*e.row.BandwidthRatio).toFixed(2))+"%",1)])),_:1},8,["label"]),(0,l.bF)(i,{property:"ConnectionRatio",label:e.$t("server.relayConnection"),width:"60"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,d.v_)((100*e.row.ConnectionRatio).toFixed(2))+"%",1)])),_:1},8,["label"]),(0,l.bF)(i,{property:"Delay",label:e.$t("server.relayDelay"),width:"60"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,d.v_)(e.row.Delay)+"ms",1)])),_:1},8,["label"]),(0,l.bF)(i,{property:"Public",label:e.$t("server.relayPublic"),width:"60"},{default:(0,l.k6)((e=>[(0,l.bF)(h,{disabled:"",modelValue:e.row.Public,"onUpdate:modelValue":t=>e.row.Public=t,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["label"])])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])],64)}var W=a(9232),A={setup(e){const{t:t}=(0,b.s9)(),a=(0,s.B)(),n=(0,o.Kh)({list:a.value.config.Client.Relay.Server,show:!1,nodes:[],timer:0});(0,l.wB)((()=>a.value.config.Client.Relay.Server),(()=>{n.list.Delay=a.value.config.Client.Relay.Server.Delay}));const r=()=>{(0,W.q)(n.list).then((()=>{v.nk.success(t("common.oper"))})).catch((e=>{console.log(e),v.nk.error(t("common.operFail"))}))},d=()=>{(0,W.W4)().then((e=>{n.nodes=e,n.timer=setTimeout(d,1e3)})).catch((()=>{n.timer=setTimeout(d,1e3)}))};return(0,l.sV)((()=>{d()})),(0,l.hi)((()=>{clearTimeout(n.timer)})),{state:n,handleSave:r}}};const M=(0,k.A)(A,[["render",T],["__scopeId","data-v-06246cf5"]]);var X=M,E={components:{SForward:w,Updater:x,RelayServers:X},setup(e){const{t:t}=(0,b.s9)(),a=(0,s.B)(),n=(0,o.Kh)({list:a.value.config.Client.Server,height:(0,l.EW)((()=>a.value.height-90))}),r=()=>{(0,m.jU)(n.list).then((()=>{v.nk.success(t("common.oper"))})).catch((e=>{console.log(e),v.nk.error(t("common.operFail"))}))};return{state:n,handleSave:r}}};const I=(0,k.A)(E,[["render",h]]);var R=I;const D={class:"t-c"};function N(e,t,a,n,r,o){const s=(0,l.g2)("el-checkbox"),u=(0,l.g2)("el-col"),c=(0,l.g2)("el-row"),i=(0,l.g2)("el-checkbox-group"),h=(0,l.g2)("el-button"),m=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",{style:(0,d.Tr)({height:`${n.state.height}px`})},[(0,l.bF)(m,{shadow:"never"},{header:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.$t("server.asyncText")),1)])),footer:(0,l.k6)((()=>[(0,l.Lk)("div",D,[(0,l.bF)(h,{type:"success",onClick:n.handleSync},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.$t("common.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(s,{modelValue:n.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.checkAll=e),indeterminate:n.state.isIndeterminate,onChange:n.handleCheckAllChange},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.$t("server.asyncCheckAll")),1)])),_:1},8,["modelValue","indeterminate","onChange"]),(0,l.bF)(i,{modelValue:n.state.checkeds,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.checkeds=e),onChange:n.handleCheckedsChange},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.state.names,(e=>((0,l.uX)(),(0,l.Wv)(u,{span:8},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.Wv)(s,{key:e.name,label:e.label,value:e.name},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.label),1)])),_:2},1032,["label","value"]))])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1})],4)}var P=a(4);const Y=()=>(0,P.zG)("sync/Names"),Q=e=>(0,P.zG)("sync/Sync",e);var H={setup(e){const{t:t}=(0,b.s9)(),a=(0,s.B)(),n=(0,o.Kh)({names:[],checkAll:!1,isIndeterminate:!1,checkeds:[],height:(0,l.EW)((()=>a.value.height-90))}),r=e=>{n.checkeds=e?n.names.map((e=>e.name)):[],n.isIndeterminate=!1},d=e=>{const t=e.length;n.checkAll=t===n.names.length,n.isIndeterminate=t>0&&t<n.names.length},u={SignInServer:t("server.asyncSignInServer"),SignInSecretKey:t("server.asyncSignInSecretKey"),GroupSecretKey:t("server.asyncGroupSecretKey"),RelaySecretKey:t("server.asyncRelaySecretKey"),SForwardSecretKey:t("server.asyncSForwardSecretKey"),UpdaterSecretKey:t("server.asyncUpdaterSecretKey"),TunnelTransports:t("server.asyncTunnelTransports")};(0,l.sV)((()=>{Y().then((e=>{n.names=e.map((e=>({name:e,label:u[e]})))}))}));const c=()=>{0!=n.checkeds.length?Q(n.checkeds).then((e=>{v.nk.success(t("common.oper"))})):v.nk.error(t("server.asyncSelect"))};return{state:n,handleCheckAllChange:r,handleCheckedsChange:d,handleSync:c}}};const j=(0,k.A)(H,[["render",N]]);var q=j,J={components:{SignInServers:R,Async:q},setup(e){const t=(0,s.B)(),a=(0,l.EW)((()=>t.value.hasAccess("Config"))),n=(0,l.EW)((()=>t.value.hasAccess("Sync"))),r=(0,o.Kh)({tab:"signin"});return{state:r,hasConfig:a,hasSync:n}}};const O=(0,k.A)(J,[["render",r],["__scopeId","data-v-548b41f4"]]);var Z=O}}]);