"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[157],{920:function(e,t,a){a.d(t,{BJ:function(){return d},NS:function(){return o},UB:function(){return g},Vk:function(){return u},aP:function(){return p},ir:function(){return r},lJ:function(){return s},mK:function(){return n},y2:function(){return c},yN:function(){return i}});var l=a(4);const n=(e="0")=>(0,l.zG)("updaterclient/get",e),s=e=>(0,l.zG)("updaterclient/confirm",e),o=e=>(0,l.zG)("updaterclient/exit",e),i=()=>(0,l.zG)("updaterclient/GetSecretKey"),r=e=>(0,l.zG)("updaterclient/SetSecretKey",e),u=()=>(0,l.zG)("updaterclient/getcurrent"),d=()=>(0,l.zG)("updaterclient/getserver"),c=e=>(0,l.zG)("updaterclient/confirmserver",e),p=()=>(0,l.zG)("updaterclient/exitserver"),g=()=>(0,l.zG)("updaterclient/Subscribe")},5962:function(e,t,a){a.d(t,{Y:function(){return i},q:function(){return r}});var l=a(8835),n=a(144),s=a(6768);const o=Symbol(),i=()=>{const e=(0,n.KR)({list:{},timer:0,hashcode:0});(0,s.Gt)(o,e);const t=()=>{(0,l.QI)(e.value.hashcode.toString()).then((a=>{e.value.hashcode=a.HashCode,a.List&&(e.value.list=a.List),e.value.timer=setTimeout(t,1e3)})).catch((()=>{e.value.timer=setTimeout(t,1e3)}))},a=()=>{clearTimeout(e.value.timer)};return{access:e,_getAccessInfo:t,clearAccessTimeout:a}},r=()=>(0,s.WQ)(o)},9383:function(e,t,a){a.d(t,{T:function(){return u},d:function(){return r}});var l=a(920),n=a(3830),s=a(144),o=a(6768);const i=Symbol(),r=()=>{const e=(0,n.B)(),t=(0,s.KR)({timer:0,list:{},hashcode:0,current:{Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0},subscribeTimer:0});(0,o.Gt)(i,t);const a=()=>{(0,l.mK)(t.value.hashcode.toString()).then((l=>{if(t.value.hashcode=l.HashCode,l.List){const a=Object.values(l.List).filter((e=>!!e.Version))[0];a&&(Object.assign(t.value.current,{DateTime:a.DateTime,Version:a.Version,Status:a.Status,Length:a.Length,Current:a.Current,Msg:a.Msg}),e.value.updater=t.value.current),t.value.list=l.List}t.value.timer=setTimeout(a,800)})).catch((()=>{t.value.timer=setTimeout(a,800)}))},r=()=>{(0,l.UB)().then((()=>{t.value.subscribeTimer=setTimeout(r,5e3)})).catch((()=>{t.value.subscribeTimer=setTimeout(r,5e3)}))},u=()=>{clearTimeout(t.value.timer),clearTimeout(t.value.subscribeTimer)};return{updater:t,_getUpdater:a,_subscribeUpdater:r,clearUpdaterTimeout:u}},u=()=>(0,o.WQ)(i)},5096:function(e,t,a){a.d(t,{A:function(){return p}});var l=a(6768);const n=e=>((0,l.Qi)("data-v-4892cd3c"),e=e(),(0,l.jt)(),e),s=n((()=>(0,l.Lk)("input",{type:"file",id:"file-input"},null,-1)));function o(e,t,a,n,o,i){const r=(0,l.g2)("PictureRounded"),u=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("a",{href:"javascript:;",onClick:t[0]||(t[0]=(...e)=>n.handleBg&&n.handleBg(...e))},[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1})]),s],64)}var i=a(7477),r=a(2933),u={components:{PictureRounded:i.syp},props:["name"],setup(e){const t=`bg-${e.name}`,a=()=>{localStorage.getItem(t)?r.s.confirm("清除背景？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s()})).catch((()=>{})):document.getElementById("file-input").click()},n=e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onload=function(e){s(e.target.result)},e.readAsDataURL(t)}catch(a){}e.target.value=""},s=e=>{e?(document.body.className="sunny",localStorage.setItem(t,e),document.body.style=`background-image:url(${e})`):(document.body.className="",document.body.style="",localStorage.setItem(t,""))};return(0,l.sV)((()=>{document.getElementById("file-input").addEventListener("change",n),s(localStorage.getItem(t))})),{handleBg:a}}},d=a(1241);const c=(0,d.A)(u,[["render",o],["__scopeId","data-v-4892cd3c"]]);var p=c},6611:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(6768);function n(e,t,a,n,s,o){const i=(0,l.g2)("el-checkbox"),r=(0,l.g2)("el-col"),u=(0,l.g2)("el-row"),d=(0,l.g2)("el-checkbox-group");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(r,{span:8},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.checkAll=e),onChange:n.handleCheckAllChange,label:"全选",indeterminate:n.state.isIndeterminate},null,8,["modelValue","onChange","indeterminate"])])),_:1})])),_:1}),(0,l.bF)(d,{modelValue:n.state.checkList,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.checkList=e),onChange:n.handleCheckedChange},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.access,((e,t)=>((0,l.uX)(),(0,l.Wv)(r,{key:t,span:8},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:e.Value,label:e.Text},null,8,["value","label"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue","onChange"])],64)}a(4114);var s=a(144),o=a(3830),i=a(5962),r={props:["machineid"],setup(e){const t=(0,o.B)(),a=(0,i.q)(),n=(0,l.EW)((()=>{const e=t.value.config.Client.Accesss;return Object.keys(e).reduce(((a,l,n)=>{if(t.value.hasAccess(l)){const t=e[l];t.Key=l,a.push(t)}return a}),[])})),r=(0,s.Kh)({checkList:[t.value.config.Client.Accesss.Api.Value,t.value.config.Client.Accesss.Web.Value,t.value.config.Client.Accesss.NetManager.Value,t.value.config.Client.Accesss.FullManager.Value,t.value.config.Client.Accesss.Transport.Value,t.value.config.Client.Accesss.Action.Value],checkAll:!1,isIndeterminate:!1}),u=()=>r.checkList.reduce(((e,t)=>(e|t)>>>0),0),d=e=>{const t=e.length;r.checkAll=t===n.value.length,r.isIndeterminate=t>0&&t<n.value.length},c=e=>{r.checkAll=e,r.checkList=e?n.value.map((e=>e.Value)):[],r.isIndeterminate=!1};return(0,l.sV)((()=>{if(a&&a.value.list[e.machineid]){const t=a.value.list[e.machineid];r.checkList=n.value.reduce(((e,a)=>((t&a.Value)>>>0==a.Value&&e.push(a.Value),e)),[])}d(r.checkList)})),{state:r,access:n,getValue:u,handleCheckAllChange:c,handleCheckedChange:d}}},u=a(1241);const d=(0,u.A)(r,[["render",n],["__scopeId","data-v-bdd023b0"]]);var c=d},2126:function(e,t,a){a.d(t,{A:function(){return y}});var l=a(6768),n=a(4232);const s=["title"],o={key:0,class:"progress"},i={key:1,class:"progress"};function r(e,t,a,r,u,d){const c=(0,l.g2)("Loading"),p=(0,l.g2)("el-icon"),g=(0,l.g2)("Download"),v=(0,l.g2)("CircleCheck");return(0,l.uX)(),(0,l.CE)("a",{href:"javascript:;",class:(0,n.C4)(["download",r.updaterColor]),onClick:t[0]||(t[0]=e=>r.handleUpdate()),title:r.updaterText},[(0,l.Lk)("span",null,[(0,l.Lk)("span",null,(0,n.v_)(r.item.Version),1),r.updater.list[r.item.MachineId]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==r.updater.list[r.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):2==r.updater.list[r.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1})):3==r.updater.list[r.item.MachineId].Status||5==r.updater.list[r.item.MachineId].Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(p,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1}),0==r.updater.list[r.item.MachineId].Length?((0,l.uX)(),(0,l.CE)("span",o,"0%")):((0,l.uX)(),(0,l.CE)("span",i,(0,n.v_)(parseInt(r.updater.list[r.item.MachineId].Current/r.updater.list[r.item.MachineId].Length*100))+"%",1))],64)):6==r.updater.list[r.item.MachineId].Status?((0,l.uX)(),(0,l.Wv)(p,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(v)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(p,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(g)])),_:1}))])],10,s)}a(4114);var u=a(3830),d=a(144),c=a(1219),p=a(2933),g=a(2248),v=a(920),h=a(7477),m=a(9383),f={props:["item","config"],components:{Download:h.f5X,Loading:h.Rhj,CircleCheck:h.rW7},setup(e){const t=(0,u.B)(),a=(0,l.EW)((()=>t.value.hasAccess("UpdateSelf"))),n=(0,l.EW)((()=>t.value.hasAccess("UpdateOther"))),s=(0,m.T)(),o=(0,l.EW)((()=>t.value.signin.Version)),i=(0,l.EW)((()=>s.value.current.Version)),r=(0,l.EW)((()=>`${i.value}->${s.value.current.DateTime}\n${s.value.current.Msg.map(((e,t)=>`${t+1}、${e}`)).join("\n")}`)),h=(0,l.EW)((()=>s.value.list[e.item.MachineId]?s.value.list[e.item.MachineId].Status<=2?e.item.Version!=o.value?`与服务器版本(${o.value})不一致，建议更新`:i.value!=e.item.Version?`不是最新版本(${i.value})，建议更新\n${r.value}`:`是最新版本，但我无法阻止你喜欢更新\n${r.value}`:{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[s.value.list[e.item.MachineId].Status]:"未检测到更新")),f=(0,l.EW)((()=>e.item.Version!=o.value?"red":s.value.list[e.item.MachineId]&&i.value!=e.item.Version?"yellow":"green")),k=()=>{if(!e.config)return;if(!a.value)return;const t=s.value.list[e.item.MachineId];if(t)if([0,1,3,5].indexOf(t.Status)>=0)c.nk.error("操作中，请稍后!");else if(6!=t.Status){if(2==t.Status){const t=(0,d.KR)(i.value),a=[(0,l.h)(g.P9,{label:`仅[${e.item.MachineName}] -> ${i.value}(最新版本)`,value:i.value})];e.config&&n.value&&a.push((0,l.h)(g.P9,{label:`[所有] -> ${i.value}(最新版本)`,value:`all->${i.value}`})),e.item.Version!=o.value&&i.value!=o.value&&(a.push((0,l.h)(g.P9,{label:`仅[${e.item.MachineName}] -> ${o.value}(服务器版本)`,value:o.value})),e.config&&n.value&&a.push((0,l.h)(g.P9,{label:`[所有] -> ${o.value}(服务器版本)`,value:`all->${o.value}`}))),(0,p.s)({title:"选择版本",message:()=>(0,l.h)(g.AV,{modelValue:t.value,placeholder:"请选择",style:"width:20rem;","onUpdate:modelValue":e=>{t.value=e}},a),confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{const a={MachineId:e.item.MachineId,Version:t.value.replace("all->",""),All:t.value.indexOf("all->")>=0};a.All&&(a.MachineId=""),(0,v.lJ)(a)})).catch((()=>{}))}}else p.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{exit(e.item.MachineId)})).catch((()=>{}));else c.nk.error("未检测到更新")};return{item:(0,l.EW)((()=>e.item)),updater:s,updaterText:h,updaterColor:f,handleUpdate:k}}},k=a(1241);const b=(0,k.A)(f,[["render",r],["__scopeId","data-v-56d38c60"]]);var y=b},5234:function(e,t,a){a.d(t,{A:function(){return Oe}});var l=a(6768),n=a(4232),s=a.p+"img/memory.a28433e5.svg",o=a.p+"img/wechat.5c371c5d.jpg",i=a.p+"img/alipay.ff9b1e7c.jpg";const r=e=>((0,l.Qi)("data-v-39d602b6"),e=e(),(0,l.jt)(),e),u={class:"status-wrap flex"},d={class:"copy"},c=r((()=>(0,l.Lk)("img",{src:s,alt:"memory"},null,-1))),p=r((()=>(0,l.Lk)("span",null,"赞助",-1))),g=[c,p],v={href:"https://github.com/snltty/linker",target:"_blank"},h=r((()=>(0,l.Lk)("div",{class:"flex-1"},null,-1))),m={class:"export"},f={class:"api"},k={class:"server"},b=r((()=>(0,l.Lk)("div",{class:"pay"},[(0,l.Lk)("img",{src:o,alt:""}),(0,l.Lk)("img",{src:i,alt:""})],-1)));function y(e,t,a,s,o,i){const r=(0,l.g2)("Export"),c=(0,l.g2)("Api"),p=(0,l.g2)("Server"),y=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",d,[(0,l.Lk)("a",{href:"javascript:;",class:"memory",title:"赞助一笔，让作者饱餐一顿",onClick:t[0]||(t[0]=e=>s.state.showPay=!0)},g),(0,l.Lk)("a",v,"©linker "+(0,n.v_)(s.self.Version),1)]),h,(0,l.Lk)("div",m,[(0,l.bF)(r,{config:s.config},null,8,["config"])]),(0,l.Lk)("div",f,[(0,l.bF)(c,{config:s.config},null,8,["config"])]),(0,l.Lk)("div",k,[(0,l.bF)(p,{config:s.config},null,8,["config"])]),(0,l.bF)(y,{modelValue:s.state.showPay,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.showPay=e),title:"赞助linker",width:"300",top:"1vh"},{default:(0,l.k6)((()=>[b])),_:1},8,["modelValue"])])}var w=a(144);const S={href:"javascript:;",title:"此设备的管理接口"};function C(e,t,a,s,o,i){const r=(0,l.g2)("Tools"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("el-popconfirm");return s.config?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,n.C4)(["status-api-wrap",{connected:s.connected}])},[(0,l.bF)(d,{"confirm-button-text":"清除","cancel-button-text":"更改",title:"确定你的操作？",onCancel:s.handleShow,onConfirm:s.handleResetConnect},{reference:(0,l.k6)((()=>[(0,l.Lk)("a",S,[(0,l.bF)(u,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1}),(0,l.eW)(" 管理接口 ")])])),_:1},8,["onCancel","onConfirm"])],2)):(0,l.Q3)("",!0)}var B=a(3830),F=a(4),V=a(7477),_={components:{Tools:V.S0q},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.api.connected)),n=()=>{localStorage.setItem("api-cache",""),window.location.reload()},s=()=>{(0,F.e3)(),(0,F.a1)(`ws://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:a,handleShow:s,handleResetConnect:n}}},T=a(1241);const x=(0,T.A)(_,[["render",C],["__scopeId","data-v-4470fcde"]]);var L=x;const I={class:"status-server-wrap"};function R(e,t,a,n,s,o){const i=(0,l.g2)("ServerConfig"),r=(0,l.g2)("ServerVersion"),u=(0,l.g2)("ServerFlow");return(0,l.uX)(),(0,l.CE)("div",I,[(0,l.bF)(i,{config:n.config},null,8,["config"]),(0,l.bF)(r,{config:n.config},null,8,["config"]),n.config?((0,l.uX)(),(0,l.Wv)(u,{key:0,config:n.config},null,8,["config"])):(0,l.Q3)("",!0)])}const A=e=>((0,l.Qi)("data-v-72d1fe1e"),e=e(),(0,l.jt)(),e),E=A((()=>(0,l.Lk)("span",null,"信标服务器",-1))),W={class:"dialog-footer t-c"};function z(e,t,a,s,o,i){const r=(0,l.g2)("Promotion"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("el-input"),c=(0,l.g2)("el-form-item"),p=(0,l.g2)("el-form"),g=(0,l.g2)("el-button"),v=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("a",{href:"javascript:;",class:(0,n.C4)({connected:s.state.connected}),title:"更改你的连接设置",onClick:t[0]||(t[0]=(...e)=>s.handleConfig&&s.handleConfig(...e))},[(0,l.bF)(u,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1}),(0,l.eW)(),E],2),(0,l.bF)(v,{modelValue:s.state.show,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.show=e),title:"连接设置",width:"300","append-to-body":""},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",W,[(0,l.bF)(g,{onClick:t[3]||(t[3]=e=>s.state.show=!1),loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1},8,["loading"]),(0,l.bF)(g,{type:"primary",onClick:s.handleSave,loading:s.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)("确定保存")])),_:1},8,["onClick","loading"])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(p,{model:s.state.form,rules:s.state.rules,"label-width":"6rem"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"机器名",prop:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:s.state.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.form.name=e),maxlength:"12","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,l.bF)(c,{label:"分组名",prop:"groupid"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:s.state.form.groupid,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.form.groupid=e),type:"password","show-password":"",maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])],64)}var P=a(9299),K=a(1219),D={components:{Promotion:V.Yk4},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.hasAccess("Config"))),n=(0,w.Kh)({show:!1,loading:!1,connected:(0,l.EW)((()=>t.value.signin.Connected)),form:{name:t.value.config.Client.Name,groupid:t.value.config.Client.GroupId},rules:{}}),s=()=>{e.config&&a.value&&(n.form.name=t.value.config.Client.Name,n.form.groupid=t.value.config.Client.GroupId,n.show=!0)},o=()=>{n.loading=!0,(0,P.rd)(n.form).then((()=>{n.loading=!1,n.show=!1,K.nk.success("已操作")})).catch((e=>{n.loading=!1,K.nk.success("操作失败!")}))};return{config:e.config,state:n,handleConfig:s,handleSave:o}}};const $=(0,T.A)(D,[["render",z],["__scopeId","data-v-72d1fe1e"]]);var M=$;function X(e,t,a,s,o,i){const r=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-button"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-dialog"),p=(0,l.g2)("ServerFlowMessenger"),g=(0,l.g2)("ServerFlowSForward"),v=(0,l.g2)("ServerFlowRelay");return(0,l.uX)(),(0,l.CE)(l.FK,null,[s.config?((0,l.uX)(),(0,l.CE)("a",{key:0,href:"javascript:;",title:"linker服务端网速，点击查看详细信息",onClick:t[0]||(t[0]=(...e)=>s.handleShow&&s.handleShow(...e))},[(0,l.Lk)("p",null,"上传 "+(0,n.v_)(s.state.overallSendtSpeed)+"/s",1),(0,l.Lk)("p",null,"下载 "+(0,n.v_)(s.state.overallReceiveSpeed)+"/s",1)])):(0,l.Q3)("",!0),(0,l.bF)(c,{title:s.state.time,"destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"540"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(d,{data:s.state.list,border:"",size:"small",width:"100%"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{prop:"text",label:"类别",width:"80"}),(0,l.bF)(r,{prop:"sendtBytes",label:"已上传",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.sendtBytesText),1)])),_:1}),(0,l.bF)(r,{prop:"sendtSpeed",label:"上传速度",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1}),(0,l.bF)(r,{prop:"receiveBytes",label:"已下载",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.receiveBytesText),1)])),_:1}),(0,l.bF)(r,{prop:"receiveSpeed",label:"下载速度",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1}),(0,l.bF)(r,{prop:"oper",label:"操作",width:"64"},{default:(0,l.k6)((e=>[e.row.detail?((0,l.uX)(),(0,l.Wv)(u,{key:0,size:"small",onClick:t=>s.handleShowDetail(e.row.id)},{default:(0,l.k6)((()=>[(0,l.eW)("详情")])),_:2},1032,["onClick"])):(0,l.Q3)("",!0)])),_:1})])),_:1},8,["data"])])])),_:1},8,["title","modelValue"]),s.state.details.Messenger?((0,l.uX)(),(0,l.Wv)(p,{key:1,config:s.config,modelValue:s.state.details.Messenger,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.details.Messenger=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.details.SForward?((0,l.uX)(),(0,l.Wv)(g,{key:2,config:s.config,modelValue:s.state.details.SForward,"onUpdate:modelValue":t[3]||(t[3]=e=>s.state.details.SForward=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0),s.state.details.Relay?((0,l.uX)(),(0,l.Wv)(v,{key:3,config:s.config,modelValue:s.state.details.Relay,"onUpdate:modelValue":t[4]||(t[4]=e=>s.state.details.Relay=e)},null,8,["config","modelValue"])):(0,l.Q3)("",!0)],64)}a(4114);const U=()=>(0,F.zG)("flowClient/GetFlows"),G=()=>(0,F.zG)("flowClient/GetMessengerFlows"),O=e=>(0,F.zG)("flowClient/GetSForwardFlows",e),j=e=>(0,F.zG)("flowClient/GetRelayFlows",e);function Q(e,t,a,s,o,i){const r=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),d=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(d,{title:"信标流量",class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(u,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{prop:"id",label:"信标id",width:"200"}),(0,l.bF)(r,{prop:"sendtBytes",label:"已上传",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.sendtBytesText),1)])),_:1}),(0,l.bF)(r,{prop:"sendtSpeed",label:"上传速度",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.sendtSpeedText)+"/s",1)])),_:1}),(0,l.bF)(r,{prop:"receiveBytes",label:"已下载",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.receiveBytesText),1)])),_:1}),(0,l.bF)(r,{prop:"receiveSpeed",label:"下载速度",sortable:""},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.receiveSpeedText)+"/s",1)])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])}var N={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,w.Kh)({show:!0,timer:0,list:[],old:null});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n={0:"登入信标",1:"客户端列表",2:"客户端删除",4:"客户端改名(转发)",7:"获取服务器版本",8:"客户端搜索ids",9:"客户端id列表",10:"客户端排序",11:"客户端在线",12:"生成客户端id",13:"登入信标V_1_3_1",2001:"外网端口(转发)",2002:"外网端口(转发)",2003:"开始打洞(转发)",2004:"开始打洞(转发)",2005:"打洞失败(转发)",2006:"打洞失败(转发)",2007:"打洞成功(转发)",2008:"打洞成功(转发)",2009:"隧道配置(转发)",2010:"隧道配置(转发)",2012:"隧道同步(转发)",2101:"中继通知(转发)",2102:"中继通知(转发)",2103:"中继请求",2105:"中继连通测试",2201:"运行网卡(转发)",2203:"停止网卡(转发)",2205:"更新网卡(转发)",2206:"同步网卡(转发)",2207:"同步网卡(转发)",2301:"添加内网穿透",2302:"移除内网穿透",2303:"通知内网穿透(转发)",2304:"通知内网穿透UDP(转发)",2305:"获取穿透列表(转发)",2401:"测试端口转发(转发)",2403:"获取端口转发(转发)",2503:"获取权限(转发)",2504:"获取权限(转发)",2506:"更新权限(转发)",2508:"同步密钥(转发)",2510:"同步服务器(转发)",2601:"更新信息(转发)",2602:"更新信息(转发)",2603:"确认更新(转发)",2604:"确认更新(转发)",2605:"重启(转发)",2607:"服务器更新信息",2608:"确认服务器更新",2609:"服务器重启",2610:"订阅更新信息(转发)",2611:"订阅更新信息(转发)",2701:"服务器流量",2702:"服务器信标流量",2703:"服务器中继流量",2704:"服务器内网穿透流量"},s=()=>{G().then((e=>{const t=a.old||e,l=[];for(let a in e){const s=e[a],i=t[a],r=`[${a}]${n[`${a}`]||"未知"}`;l.push({id:r,sendtBytes:s.SendtBytes,sendtBytesText:o(s.SendtBytes),sendtSpeed:s.SendtBytes-i.SendtBytes,sendtSpeedText:o(s.SendtBytes-i.SendtBytes),receiveBytes:s.ReceiveBytes,receiveBytesText:o(s.ReceiveBytes),receiveSpeed:s.ReceiveBytes-i.ReceiveBytes,receiveSpeedText:o(s.ReceiveBytes-i.ReceiveBytes)})}a.list=l.filter((e=>!!e.id)),a.old=e,a.timer=setTimeout(s,1e3)})).catch((e=>{a.timer=setTimeout(s,1e3)}))},o=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{s()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a}}};const J=(0,T.A)(N,[["render",Q],["__scopeId","data-v-6238c500"]]);var Y=J;const q={class:"head"},H={class:"page t-c"},Z={class:"page-wrap"};function ee(e,t,a,s,o,i){const r=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(p,{title:"内网穿透流量",class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",q,[(0,l.bF)(r,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:"域名/端口搜索"},null,8,["modelValue"])]),(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"Key",label:"域名/端口",width:"200"}),(0,l.bF)(u,{prop:"SendtBytes",label:"已上传",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.SendtBytesText),1)])),_:1}),(0,l.bF)(u,{prop:"DiffSendtBytes",label:"上传速度",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1}),(0,l.bF)(u,{prop:"ReceiveBytes",label:"已下载",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.ReceiveBytesText),1)])),_:1}),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:"下载速度",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1})])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",H,[(0,l.Lk)("div",Z,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["modelValue"])}var te={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,w.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=()=>{O({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(n,1e3)})).catch((e=>{a.timer=setTimeout(n,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},o=e=>{e&&(a.page.Page=e)},i=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{n()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:o,handleSort:i}}};const ae=(0,T.A)(te,[["render",ee],["__scopeId","data-v-3e577fa7"]]);var le=ae;const ne={class:"head"},se={class:"page t-c"},oe={class:"page-wrap"};function ie(e,t,a,s,o,i){const r=(0,l.g2)("el-input"),u=(0,l.g2)("el-table-column"),d=(0,l.g2)("el-table"),c=(0,l.g2)("el-pagination"),p=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(p,{title:"中继流量",class:"options-center",top:"1vh","destroy-on-close":"",modelValue:s.state.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.show=e),width:"680"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",ne,[(0,l.bF)(r,{modelValue:s.state.page.Key,"onUpdate:modelValue":t[0]||(t[0]=e=>s.state.page.Key=e),placeholder:"名字搜索"},null,8,["modelValue"])]),(0,l.bF)(d,{data:s.state.list,stripe:"",border:"",size:"small",width:"100%",height:"60vh",onSortChange:s.handleSort},{default:(0,l.k6)((()=>[(0,l.bF)(u,{prop:"FromName",label:"发起端",width:"120"}),(0,l.bF)(u,{prop:"ToName",label:"目标端",width:"120"}),(0,l.bF)(u,{prop:"SendtBytes",label:"已上传",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.SendtBytesText),1)])),_:1}),(0,l.bF)(u,{prop:"DiffSendtBytes",label:"上传速度",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.DiffSendtBytesText)+"/s",1)])),_:1}),(0,l.bF)(u,{prop:"ReceiveBytes",label:"已下载",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.ReceiveBytesText),1)])),_:1}),(0,l.bF)(u,{prop:"DiffReceiveBytes",label:"下载速度",sortable:"custom"},{default:(0,l.k6)((e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.DiffReceiveBytesText)+"/s",1)])),_:1})])),_:1},8,["data","onSortChange"]),(0,l.Lk)("div",se,[(0,l.Lk)("div",oe,[(0,l.bF)(c,{small:"",background:"",layout:"total,prev,pager, next",total:s.state.page.Count,"page-size":s.state.page.PageSize,"current-page":s.state.page.Page,onCurrentChange:s.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])])])])),_:1},8,["modelValue"])}var re={props:["modelValue","config"],emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,w.Kh)({show:!0,timer:0,list:[],page:{Key:"",Page:1,PageSize:15,Count:0,Order:1,OrderType:0}});(0,l.wB)((()=>a.show),(e=>{e||setTimeout((()=>{t("update:modelValue",e)}),300)}));const n=()=>{j({Key:a.page.Key,Page:a.page.Page,PageSize:a.page.PageSize,Order:a.page.Order,OrderType:a.page.OrderType}).then((e=>{try{a.page.Page=e.Page,a.page.PageSize=e.PageSize,a.page.Count=e.Count;const t=[];for(let a=0;a<e.Data.length;a++){const l=e.Data[a];Object.assign(l,{SendtBytesText:s(l.SendtBytes),ReceiveBytesText:s(l.ReceiveBytes),DiffSendtBytesText:s(l.DiffSendtBytes),DiffReceiveBytesText:s(l.DiffReceiveBytes)}),t.push(l)}a.list=t}catch(t){console.log(t)}a.timer=setTimeout(n,1e3)})).catch((e=>{a.timer=setTimeout(n,1e3)}))},s=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`},o=e=>{e&&(a.page.Page=e)},i=e=>{const t={ascending:1,descending:0}[e.order],l={SendtBytes:1,DiffSendtBytes:2,ReceiveBytes:3,DiffReceiveBytes:4}[e.prop];a.page.Order=l,a.page.OrderType=t};return(0,l.sV)((()=>{n()})),(0,l.hi)((()=>{clearTimeout(a.timer)})),{config:e.config,state:a,handlePageChange:o,handleSort:i}}};const ue=(0,T.A)(re,[["render",ie],["__scopeId","data-v-7dbf3a4a"]]);var de=ue,ce={props:["config"],components:{ServerFlowMessenger:Y,ServerFlowSForward:le,ServerFlowRelay:de},setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.hasAccess("SForwardFlow"))),n=(0,l.EW)((()=>t.value.hasAccess("RelayFlow"))),s=(0,w.Kh)({show:!1,timer:0,overallSendtSpeed:"0000.00KB",overallReceiveSpeed:"0000.00KB",time:"",list:[],old:null,details:{Messenger:!1,SForward:!1,Relay:!1}}),o=()=>{s.show=!0},i=e=>{s.details[e]=!0},r={External:{text:"外网端口",detail:!1},Relay:{text:"中继",detail:n.value},Messenger:{text:"信标",detail:!0},SForward:{text:"内网穿透",detail:a.value}},u=()=>{U().then((e=>{const t=s.old||e;let a=0,l=0,n=0,o=0;for(let s in t.Items)a+=t.Items[s].ReceiveBytes,l+=t.Items[s].SendtBytes;for(let s in e.Items)n+=e.Items[s].ReceiveBytes,o+=e.Items[s].SendtBytes;s.overallSendtSpeed=d(o-l),s.overallReceiveSpeed=d(n-a),s.time=`从 ${e.Start}启动 至今`;const i=[];for(let s in e.Items){const a=e.Items[s],l=t.Items[s],n=r[`${s}`]||{text:"未知",detail:!1};i.push({id:s,text:n.text,detail:n.detail,sendtBytes:a.SendtBytes,sendtBytesText:d(a.SendtBytes),sendtSpeed:a.SendtBytes-l.SendtBytes,sendtSpeedText:d(a.SendtBytes-l.SendtBytes),receiveBytes:a.ReceiveBytes,receiveBytesText:d(a.ReceiveBytes),receiveSpeed:a.ReceiveBytes-l.ReceiveBytes,receiveSpeedText:d(a.ReceiveBytes-l.ReceiveBytes)})}s.list=i.filter((e=>!!e.id)),s.old=e,s.timer=setTimeout(u,1e3)})).catch((e=>{s.timer=setTimeout(u,1e3)}))},d=e=>{let t=0;while(e>=1024)e/=1024,t++;return`${e.toFixed(2)}${["B","KB","MB","GB","TB"][t]}`};return(0,l.sV)((()=>{u()})),(0,l.hi)((()=>{clearTimeout(s.timer)})),{hasSForwardFlow:a,config:e.config,state:s,handleShow:o,handleShowDetail:i}}};const pe=(0,T.A)(ce,[["render",X],["__scopeId","data-v-6ba77111"]]);var ge=pe;const ve=["title"],he={key:0,class:"progress"},me={key:1,class:"progress"};function fe(e,t,a,s,o,i){const r=(0,l.g2)("Loading"),u=(0,l.g2)("el-icon"),d=(0,l.g2)("Download"),c=(0,l.g2)("CircleCheck");return(0,l.uX)(),(0,l.CE)("a",{href:"javascript:;",title:"服务端的程序版本",onClick:t[0]||(t[0]=(...e)=>s.handleUpdate&&s.handleUpdate(...e)),class:(0,n.C4)(["download",s.updateColor()])},[(0,l.Lk)("span",null,(0,n.v_)(s.state.version),1),s.updaterCurrent.Version?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[1==s.updaterCurrent.Status?((0,l.uX)(),(0,l.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1})):2==s.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(u,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})):3==s.updaterServer.Status||5==s.updaterServer.Status?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(u,{size:"14",class:"loading"},{default:(0,l.k6)((()=>[(0,l.bF)(r)])),_:1}),0==s.updaterServer.Length?((0,l.uX)(),(0,l.CE)("span",he,"0%")):((0,l.uX)(),(0,l.CE)("span",me,(0,n.v_)(parseInt(s.updaterServer.Current/s.updaterServer.Length*100))+"%",1))],64)):6==s.updaterServer.Status?((0,l.uX)(),(0,l.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,l.k6)((()=>[(0,l.bF)(c)])),_:1})):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.Wv)(u,{key:1,size:"14"},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1}))],10,ve)}var ke=a(2933),be=a(920),ye={components:{Promotion:V.Yk4,Download:V.f5X,Loading:V.Rhj,CircleCheck:V.rW7,ServerFlow:ge},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.hasAccess("UpdateServer"))),n=(0,w.KR)({Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0}),s=(0,w.KR)({Version:"",Status:0,Length:0,Current:0}),o=(0,l.EW)((()=>`${n.value.Version}->${n.value.DateTime}\n${n.value.Msg.map(((e,t)=>`${t+1}、${e}`)).join("\n")}`)),i=(0,w.Kh)({show:!1,loading:!1,connected:(0,l.EW)((()=>t.value.signin.Connected)),version:(0,l.EW)((()=>t.value.signin.Version))}),r=()=>{(0,be.Vk)().then((e=>{n.value.DateTime=e.DateTime,n.value.Version=e.Version,n.value.Status=e.Status,n.value.Length=e.Length,n.value.Current=e.Current,n.value.Msg=e.Msg,setTimeout((()=>{r()}),1e3)})).catch((()=>{setTimeout((()=>{r()}),1e3)}))},u=()=>{(0,be.BJ)().then((e=>{s.value.Version=e.Version,s.value.Status=e.Status,s.value.Length=e.Length,s.value.Current=e.Current,s.value.Status>2&&s.value.Status<6&&setTimeout((()=>{u()}),1e3)})).catch((()=>{setTimeout((()=>{u()}),1e3)}))},d=()=>n.value.Version?s.value.Status<=2?i.version!=n.value.Version?`不是最新版本(${n.value.Version})，建议更新\n${o.value}`:`是最新版本，但我无法阻止你喜欢更新\n${o.value}`:{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[s.value.Status]:"未检测到更新",c=()=>i.version!=n.value.Version?"yellow":"green",p=()=>{e.config&&a.value&&(n.value.Version?[0,1,3,5].indexOf(s.value.Status)>=0?K.nk.error("操作中，请稍后!"):6!=s.value.Status?2==n.value.Status&&ke.s.confirm("确定更新服务端吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,be.y2)(n.value.Version).then((()=>{setTimeout((()=>{u()}),1e3)}))})).catch((()=>{})):ke.s.confirm("确定关闭服务端吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,be.aP)()})).catch((()=>{})):K.nk.error("未检测到更新"))};return(0,l.sV)((()=>{r(),u()})),{config:e.config,state:i,updaterCurrent:n,updaterServer:s,handleUpdate:p,updateText:d,updateColor:c}}};const we=(0,T.A)(ye,[["render",fe],["__scopeId","data-v-70063cba"]]);var Se=we,Ce={components:{ServerConfig:M,ServerFlow:ge,ServerVersion:Se},props:["config"],setup(e){const t=(0,w.Kh)({show:!1,loading:!1});return{config:e.config,state:t}}};const Be=(0,T.A)(Ce,[["render",R],["__scopeId","data-v-7c1beb5c"]]);var Fe=Be;const Ve=e=>((0,l.Qi)("data-v-117ef7b0"),e=e(),(0,l.jt)(),e),_e={key:0,class:"status-export-wrap"},Te={class:"port-wrap"},xe=Ve((()=>(0,l.Lk)("div",{class:"text"}," 导出配置，作为子设备运行，如果使用docker，容器映射configs文件夹即可 ",-1))),Le={class:"body"},Ie={class:"card-header"},Re={class:"flex"},Ae={style:{"margin-left":"2rem"}},Ee=Ve((()=>(0,l.Lk)("span",null,"设备名 : ",-1))),We=Ve((()=>(0,l.Lk)("span",null,"管理密码 : ",-1)));function ze(e,t,a,n,s,o){const i=(0,l.g2)("Share"),r=(0,l.g2)("el-icon"),u=(0,l.g2)("el-checkbox"),d=(0,l.g2)("el-popover"),c=(0,l.g2)("el-input"),p=(0,l.g2)("Access"),g=(0,l.g2)("el-card"),v=(0,l.g2)("el-button"),h=(0,l.g2)("el-dialog");return n.config&&n.hasExport?((0,l.uX)(),(0,l.CE)("div",_e,[(0,l.Lk)("a",{href:"javascript:;",title:"此设备的管理接口",onClick:t[0]||(t[0]=e=>n.state.show=!0)},[(0,l.bF)(r,{size:"16"},{default:(0,l.k6)((()=>[(0,l.bF)(i)])),_:1}),(0,l.eW)(" 导出配置 ")]),(0,l.bF)(h,{class:"options-center",title:"导出配置","destroy-on-close":"",modelValue:n.state.show,"onUpdate:modelValue":t[5]||(t[5]=e=>n.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,l.k6)((()=>[(0,l.bF)(v,{plain:"",onClick:t[4]||(t[4]=e=>n.state.show=!1),loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1},8,["loading"]),(0,l.bF)(v,{type:"success",plain:"",onClick:n.handleExport,loading:n.state.loading},{default:(0,l.k6)((()=>[(0,l.eW)("确定导出")])),_:1},8,["onClick","loading"])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",Te,[xe,(0,l.Lk)("div",Le,[(0,l.bF)(g,{shadow:"never"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",Ie,[(0,l.Lk)("div",Re,[(0,l.Lk)("div",null,[(0,l.bF)(d,{placement:"top-start",title:"tips",width:200,trigger:"hover",content:"这将生成唯一ID，多台设备使用产生冲突，挤压下线"},{reference:(0,l.k6)((()=>[(0,l.bF)(u,{disabled:n.onlyNode,modelValue:n.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.single=e),label:"单设备"},null,8,["disabled","modelValue"])])),_:1})]),(0,l.Lk)("div",Ae,[Ee,(0,l.bF)(c,{disabled:!n.state.single,modelValue:n.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.name=e),maxlength:"12","show-word-limit":"",style:{width:"15rem"}},null,8,["disabled","modelValue"])]),(0,l.Lk)("div",null,[We,(0,l.bF)(c,{type:"password","show-password":"",disabled:n.onlyNode,modelValue:n.state.apipassword,"onUpdate:modelValue":t[3]||(t[3]=e=>n.state.apipassword=e),maxlength:"36","show-word-limit":"",style:{width:"15rem"}},null,8,["disabled","modelValue"])])])])])),default:(0,l.k6)((()=>[(0,l.bF)(p,{ref:"accessDom",machineid:n.machineId},null,8,["machineid"])])),_:1})])])])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0)}var Pe=a(8835),Ke=a(6611),De={components:{Share:V.SYj,Access:Ke.A},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.hasAccess("Export"))),n=(0,l.EW)((()=>t.value.config.Client.OnlyNode)),s=(0,l.EW)((()=>t.value.config.Client.Id)),o=(0,w.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:t.value.config.Client.CApi.ApiPassword}),i=(0,w.KR)(null),r=()=>{if(!a.value)return;const e={access:i.value.getValue(),single:o.single,name:o.name,apipassword:o.apipassword};if(e.single){if(!e.name)return void K.nk.error("请输入设备名")}else e.name="";if(!e.single||o.name)return e;K.nk.error("请输入管理密码")},u=()=>{const e=document.createElement("a");o.single?e.download=`client-node-export-${o.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},d=()=>{const e=r();e&&(o.loading=!0,(0,Pe.P$)(e).then((()=>{o.loading=!1,o.show=!1,K.nk.success("导出成功"),u()})).catch((()=>{o.loading=!1})))};return{config:e.config,onlyNode:n,hasExport:a,machineId:s,state:o,accessDom:i,handleExport:d}}};const $e=(0,T.A)(De,[["render",ze],["__scopeId","data-v-117ef7b0"]]);var Me=$e,Xe=a(2126),Ue={components:{Api:L,Server:Fe,Export:Me,UpdaterBtn:Xe.A},props:["config"],setup(e){const t=(0,B.B)(),a=(0,l.EW)((()=>t.value.self)),n=(0,w.Kh)({showPay:!1});return{state:n,config:e.config,self:a}}};const Ge=(0,T.A)(Ue,[["render",y],["__scopeId","data-v-39d602b6"]]);var Oe=Ge}}]);