(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[904],{4:function(e,l,t){"use strict";t.d(l,{a1:function(){return m},e3:function(){return k},jH:function(){return w},zG:function(){return v}});t(4114),t(6573),t(8100),t(7936);var n=t(1219);let o=0,a=null,r="",i=1,u="";const s={},d={connected:!1,connecting:!1},c=()=>{const e=Date.now();for(let l in s){const t=s[l];e-t.time>t.timeout&&(t.reject("超时~"),delete s[l])}setTimeout(c,1e3)};c();const p={subs:{},add:function(e,l){"function"==typeof l&&(this.subs[e]||(this.subs[e]=[]),this.subs[e].push(l))},remove(e,l){let t=this.subs[e]||[];for(let n=t.length-1;n>=0;n--)t[n]==l&&t.splice(n,1)},push(e,l){let t=this.subs[e]||[];for(let n=t.length-1;n>=0;n--)t[n](l)}},f=()=>{d.connected=!0,d.connecting=!1,p.push(y,d.connected)},g=e=>{d.connected=!1,d.connecting=!1,p.push(y,d.connected),setTimeout((()=>{m()}),1e3)},h=e=>{if("string"!=typeof e.data)return void e.data.arrayBuffer().then((l=>{const t=new DataView(l).getInt8(),n=new FileReader;n.readAsText(e.data.slice(4,4+t),"utf8"),n.onload=()=>{let o=JSON.parse(n.result);o.Content={Name:o.Content,Img:e.data.slice(4+t,e.data.length),ArrayBuffer:l},b(o)}}));let l=JSON.parse(e.data);b(l)},b=e=>{let l=s[e.RequestId];l?(0==e.Code?l.resolve(e.Content):1==e.Code?l.reject(e.Content):255==e.Code?(l.reject(e.Content),l.errHandle||n.nk.error(`${l.path}:${e.Content}`)):p.push(e.Path,e.Content),delete s[e.RequestId]):p.push(e.Path,e.Content)},m=(e=r,l=u)=>{if(u=l,r=e,d.connecting||d.connected)return;null!=a&&a.close(),d.connecting=!0;const t=l||"snltty";a=new WebSocket(r,[t]),a.iddd=++i,a.onopen=f,a.onclose=g,a.onmessage=h},k=()=>{a&&a.close()},v=(e,l={},t=!1,n=15e3)=>new Promise(((r,i)=>{let u=++o;try{s[u]={resolve:r,reject:i,errHandle:t,path:e,time:Date.now(),timeout:n};let o=JSON.stringify({Path:e,RequestId:u,Content:"string"==typeof l?l:JSON.stringify(l)});d.connected&&1==a.readyState?a.send(o):i("网络错误~")}catch(c){console.log(c),i("网络错误~"),delete s[u]}})),y=Symbol(),w=e=>{p.add(y,e)}},743:function(e,l,t){"use strict";t.d(l,{$U:function(){return i},Ap:function(){return o},Co:function(){return a},DY:function(){return u},Qs:function(){return s},eX:function(){return d},pY:function(){return r}});var n=t(4);const o=()=>(0,n.zG)("sforwardclient/GetSecretKey"),a=e=>(0,n.zG)("sforwardclient/SetSecretKey",e),r=(e="0")=>(0,n.zG)("sforwardclient/get",e),i=e=>(0,n.zG)("sforwardclient/getremote",e),u=e=>(0,n.zG)("sforwardclient/remove",e),s=e=>(0,n.zG)("sforwardclient/add",e),d=()=>(0,n.zG)("sforwardclient/TestLocal")},9299:function(e,l,t){"use strict";t.d(l,{BS:function(){return s},SZ:function(){return r},Se:function(){return d},VN:function(){return i},gC:function(){return c},jU:function(){return a},nD:function(){return u},rd:function(){return o}});var n=t(4);const o=e=>(0,n.zG)("signInclient/set",e),a=e=>(0,n.zG)("signInclient/setservers",e),r=()=>(0,n.zG)("signInclient/info"),i=e=>(0,n.zG)("signInclient/setorder",e),u=e=>(0,n.zG)("signInclient/List",e),s=e=>(0,n.zG)("signInclient/ids",e),d=e=>(0,n.zG)("signInclient/del",e),c=e=>(0,n.zG)("signInclient/setname",e)},83:function(e,l,t){"use strict";t.d(l,{$M:function(){return s},KW:function(){return u},b0:function(){return a},gM:function(){return i},ix:function(){return o},r7:function(){return r},xo:function(){return d}});var n=t(4);const o=()=>(0,n.zG)("tunnel/gettypes"),a=e=>(0,n.zG)("tunnel/SetServers",e),r=(e="0")=>(0,n.zG)("tunnel/get",e),i=()=>(0,n.zG)("tunnel/refresh"),u=e=>(0,n.zG)("tunnel/SetRouteLevel",e),s=e=>(0,n.zG)("tunnel/SetTransports",e),d=e=>(0,n.zG)("tunnel/SetExcludeIPs",e)},920:function(e,l,t){"use strict";t.d(l,{BJ:function(){return d},NS:function(){return r},Vk:function(){return s},aP:function(){return p},ir:function(){return u},lJ:function(){return a},mK:function(){return o},y2:function(){return c},yN:function(){return i}});var n=t(4);const o=(e="0")=>(0,n.zG)("updaterclient/get",e),a=e=>(0,n.zG)("updaterclient/confirm",e),r=e=>(0,n.zG)("updaterclient/exit",e),i=()=>(0,n.zG)("updaterclient/GetSecretKey"),u=e=>(0,n.zG)("updaterclient/SetSecretKey",e),s=()=>(0,n.zG)("updaterclient/getcurrent"),d=()=>(0,n.zG)("updaterclient/getserver"),c=e=>(0,n.zG)("updaterclient/confirmserver",e),p=()=>(0,n.zG)("updaterclient/exitserver")},3830:function(e,l,t){"use strict";t.d(l,{B:function(){return u},v:function(){return i}});var n=t(4),o=t(144),a=t(6768);const r=Symbol(),i=()=>{const e=(0,o.KR)({api:{connected:!1},height:0,config:{Common:{},Client:{Servers:[]},Server:{},Running:{Relay:{Servers:[]},Tuntap:{IP:"",PrefixLength:24},Client:{Servers:[]}},configed:!1},signin:{Connected:!1,Connecting:!1,Version:"v1.0.0.0"},bufferSize:["1KB","2KB","4KB","8KB","16KB","32KB","64KB","128KB","256KB","512KB","1024KB"],updater:{},self:{}});return(0,n.jH)((l=>{e.value.api.connected=l})),(0,a.Gt)(r,e),e},u=()=>(0,a.WQ)(r)},4378:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var n=t(6768),o=t(4232);function a(e,l,t,a,r,i){const u=(0,n.g2)("Version"),s=(0,n.g2)("el-input"),d=(0,n.g2)("el-table-column"),c=(0,n.g2)("Delete"),p=(0,n.g2)("el-icon"),f=(0,n.g2)("el-button"),g=(0,n.g2)("el-popconfirm"),h=(0,n.g2)("Plus"),b=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(u,{ckey:"excludeIPConfig"}),(0,n.bF)(b,{data:a.state.list,border:"",size:"small",width:"100%",height:`${a.state.height}px`,onCellDblclick:a.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(d,{prop:"IPAddress",label:"IP"},{default:(0,n.k6)((e=>[e.row.IPAddressEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.IPAddress,"onUpdate:modelValue":l=>e.row.IPAddress=l,onBlur:l=>a.handleEditBlur(e.row,"IPAddress")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.IPAddress),1)],64))])),_:1}),(0,n.bF)(d,{prop:"Mask",label:"掩码"},{default:(0,n.k6)((e=>[e.row.MaskEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Mask,"onUpdate:modelValue":l=>e.row.Mask=l,onBlur:l=>a.handleEditBlur(e.row,"Mask")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Mask),1)],64))])),_:1}),(0,n.bF)(d,{prop:"Oper",label:"操作",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(g,{title:"删除不可逆，是否确认?",onConfirm:l=>a.handleDel(e.$index)},{reference:(0,n.k6)((()=>[(0,n.bF)(f,{type:"danger",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,n.bF)(f,{type:"primary",size:"small",onClick:l=>a.handleAdd(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(h)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","height","onCellDblclick"])],64)}var r=t(83),i=t(3830),u=t(1219),s=t(144),d=t(8662),c=t(7477),p={label:"打洞排除IP",name:"excludeIP",order:3,components:{Version:d["default"],Delete:c.epd,Plus:c.FWt},setup(e){const l=(0,i.B)(),t=(0,s.Kh)({list:l.value.config.Running.Tunnel.ExcludeIPs||[{IPAddress:"0.0.0.0",Mask:32}],types:[],height:(0,n.EW)((()=>l.value.height-127))}),o=(e,l)=>{a(e,l.property)},a=(e,l)=>{t.list.forEach((e=>{e["IPAddressEditing"]=!1,e["MaskEditing"]=!1})),e[`${l}Editing`]=!0},d=(e,l)=>{e[`${l}Editing`]=!1,f()},c=e=>{t.list.splice(e,1),f()},p=e=>{t.list.splice(e+1,0,{IPAddress:"0.0.0.0",Mask:32}),f()},f=()=>{t.list.forEach((e=>{e.Mask=parseInt(e.Mask)})),(0,r.xo)(t.list).then((()=>{u.nk.success("已操作")})).catch((()=>{u.nk.success("操作失败")}))};return(0,n.sV)((()=>{0==t.list.length&&(t.list=[{IPAddress:"0.0.0.0",Mask:32}])})),{state:t,handleCellClick:o,handleEditBlur:d,handleDel:c,handleAdd:p}}},f=t(1241);const g=(0,f.A)(p,[["render",a]]);var h=g},2820:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return c}});var n=t(6768);const o={class:"servers-wrap"};function a(e,l,t,a,r,i){const u=(0,n.g2)("el-tab-pane"),s=(0,n.g2)("el-tabs");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(s,{type:"border-card",style:{width:"100%"},modelValue:a.state.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>a.state.tab=e)},{default:(0,n.k6)((()=>[a.state.connected?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(a.settingComponents,((e,l)=>((0,n.uX)(),(0,n.Wv)(u,{key:l,label:e.label,name:e.name},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e)))])),_:2},1032,["label","name"])))),128)):(0,n.Q3)("",!0)])),_:1},8,["modelValue"])])}var r=t(144),i=t(3830),u={components:{},setup(e){const l=["./Index.vue","./Version.vue"],o=t(2067),a=o.keys().filter((e=>0==l.includes(e))).map((e=>o(e).default)).sort(((e,l)=>e.order-l.order)),u=(0,i.B)(),s=(0,r.Kh)({tab:a[0].name,connected:(0,n.EW)((()=>u.value.api.connected&&u.value.config.configed))});return{state:s,settingComponents:a}}},s=t(1241);const d=(0,s.A)(u,[["render",a],["__scopeId","data-v-40863bc6"]]);var c=d},4780:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return m}});var n=t(6768),o=t(4232);function a(e,l,t,a,r,i){const u=(0,n.g2)("el-radio-button"),s=(0,n.g2)("el-radio-group"),d=(0,n.g2)("Version"),c=(0,n.g2)("el-input"),p=(0,n.g2)("el-table-column"),f=(0,n.g2)("el-option"),g=(0,n.g2)("el-select"),h=(0,n.g2)("el-switch"),b=(0,n.g2)("Top"),m=(0,n.g2)("el-icon"),k=(0,n.g2)("el-button"),v=(0,n.g2)("Bottom"),y=(0,n.g2)("Delete"),w=(0,n.g2)("el-popconfirm"),C=(0,n.g2)("Plus"),F=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(d,{ckey:"relayServers"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(s,{modelValue:a.state.byRelay,"onUpdate:modelValue":l[0]||(l[0]=e=>a.state.byRelay=e),size:"small",style:{"vertical-align":"bottom"},onChange:a.handleByRelayChange},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"延迟优先",value:!0}),(0,n.bF)(u,{label:"顺序优先",value:!1})])),_:1},8,["modelValue","onChange"])])])),_:1}),(0,n.bF)(F,{data:a.state.list,border:"",size:"small",width:"100%",height:`${a.state.height}px`,onCellDblclick:a.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(p,{prop:"Name",label:"名称",width:"100"},{default:(0,n.k6)((e=>[e.row.NameEditing?((0,n.uX)(),(0,n.Wv)(c,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>a.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Name),1)],64))])),_:1}),(0,n.bF)(p,{prop:"RelayType",label:"类别",width:"80"},{default:(0,n.k6)((e=>[(0,n.bF)(g,{modelValue:e.row.RelayType,"onUpdate:modelValue":l=>e.row.RelayType=l,placeholder:"Select",size:"small",onChange:l=>a.handleEditBlur(e.row,"RelayType")},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.state.types,(e=>((0,n.uX)(),(0,n.Wv)(f,{key:e.Value,label:e.Name,value:e.Value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(p,{prop:"Host",label:"地址"},{default:(0,n.k6)((e=>[e.row.HostEditing?((0,n.uX)(),(0,n.Wv)(c,{key:0,autofocus:"",size:"small",modelValue:e.row.Host,"onUpdate:modelValue":l=>e.row.Host=l,onBlur:l=>a.handleEditBlur(e.row,"Host")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("span",{class:(0,o.C4)({red:!e.row.Available,green:e.row.Available})},(0,o.v_)(e.row.Host),3),(0,n.Lk)("span",{class:(0,o.C4)({red:-1==e.row.Delay,green:e.row.Delay<500&&e.row.Delay>=0,yellow:e.row.Delay>=500})}," - "+(0,o.v_)(e.row.Delay)+"ms",3)],64))])),_:1}),(0,n.bF)(p,{prop:"SecretKey",label:"秘钥"},{default:(0,n.k6)((e=>[e.row.SecretKeyEditing?((0,n.uX)(),(0,n.Wv)(c,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.SecretKey,"onUpdate:modelValue":l=>e.row.SecretKey=l,onBlur:l=>a.handleEditBlur(e.row,"SecretKey")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[],64))])),_:1}),(0,n.bF)(p,{property:"SSL",label:"SSL",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(h,{modelValue:e.row.SSL,"onUpdate:modelValue":l=>e.row.SSL=l,onChange:l=>a.handleEditBlur(e.row,"SSL"),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(p,{property:"Disabled",label:"禁用",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(h,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,onChange:l=>a.handleEditBlur(e.row,"Disabled"),"inline-prompt":"","active-text":"是","inactive-text":"否",style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(p,{prop:"Sort",label:"调序",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(k,{size:"small",onClick:l=>a.handleSort(e.$index,-1)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(b)])),_:1})])),_:2},1032,["onClick"]),(0,n.bF)(k,{size:"small",onClick:l=>a.handleSort(e.$index,1)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(v)])),_:1})])),_:2},1032,["onClick"])])])),_:1}),(0,n.bF)(p,{prop:"Oper",label:"操作",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(w,{title:"删除不可逆，是否确认?",onConfirm:l=>a.handleDel(e.$index)},{reference:(0,n.k6)((()=>[(0,n.bF)(k,{type:"danger",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(y)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,n.bF)(k,{type:"primary",size:"small",onClick:l=>a.handleAdd(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(C)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","height","onCellDblclick"])],64)}var r=t(4);const i=()=>(0,r.zG)("relay/gettypes"),u=e=>(0,r.zG)("relay/SetServers",e);var s=t(3830),d=t(1219),c=t(144),p=t(8662),f=t(7477),g={label:"中继服务器",name:"relayServers",order:4,components:{Version:p["default"],Delete:f.epd,Plus:f.FWt,Top:f.EjV,Bottom:f.i5o},setup(e){const l=(0,s.B)(),t=(0,c.Kh)({list:l.value.config.Running.Relay.Servers.sort(((e,l)=>e.Disabled-l.Disabled)),byRelay:l.value.config.Running.Relay.ByRelay,types:[],height:(0,n.EW)((()=>l.value.height-127))});(0,n.wB)((()=>l.value.config.Running.Relay.Servers),(()=>{0==t.list.filter((e=>e["__editing"])).length&&(t.list=l.value.config.Running.Relay.Servers.sort(((e,l)=>e.Disabled-l.Disabled)),t.byRelay=l.value.config.Running.Relay.ByRelay)}));const o=()=>{i().then((e=>{t.types=e}))},a=(e,l)=>{r(e,l.property)},r=(e,l)=>{t.list.forEach((e=>{e["NameEditing"]=!1,e["RelayTypeEditing"]=!1,e["HostEditing"]=!1,e["SecretKeyEditing"]=!1})),e["__editing"]=!0,e[`${l}Editing`]=!0},p=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1,m()},f=e=>{t.list.splice(e,1),m()},g=e=>{t.list.filter((e=>""==e.Host||""==e.Name)).length>0||(t.list.splice(e+1,0,{Name:"",Host:"",RelayType:0,SecretKey:"snltty",Disabled:!1}),m())},h=(e,l)=>{const n=t.list[e],o=t.list[e+l];n&&o&&(t.list[e+l]=n,t.list[e]=o),m(t.list)},b=()=>{m()},m=()=>{t.list=t.list.slice().sort(((e,l)=>e.Disabled-l.Disabled)),u({servers:t.list,byRelay:t.byRelay}).then((()=>{d.nk.success("已操作")})).catch((()=>{d.nk.success("操作失败")}))};return(0,n.sV)((()=>{o()})),{state:t,handleCellClick:a,handleEditBlur:p,handleDel:f,handleAdd:g,handleSort:h,handleByRelayChange:b}}},h=t(1241);const b=(0,h.A)(g,[["render",a],["__scopeId","data-v-7981ea4b"]]);var m=b},6093:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var n=t(6768);const o={style:{width:"30rem",padding:"5rem 0",margin:"0 auto"}},a=(0,n.Lk)("p",{class:"t-c"}," 服务器代理穿透密钥 ",-1);function r(e,l,t,r,i,u){const s=(0,n.g2)("Version"),d=(0,n.g2)("el-input");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(s,{ckey:"sforwardKey"}),(0,n.Lk)("div",o,[a,(0,n.Lk)("p",null,[(0,n.bF)(d,{type:"password","show-password":"",modelValue:r.state.SForwardSecretKey,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.SForwardSecretKey=e),maxlength:"36",onBlur:r.handleChange},null,8,["modelValue","onBlur"])])])],64)}var i=t(743),u=t(3830),s=t(1219),d=t(144),c=t(8662),p={label:"服务器穿透",name:"sforward",order:5,components:{Version:c["default"]},setup(e){(0,u.B)();const l=(0,d.Kh)({SForwardSecretKey:""}),t=()=>{(0,i.Ap)().then((e=>{l.SForwardSecretKey=e}))},o=()=>{l.SForwardSecretKey&&(0,i.Co)(l.SForwardSecretKey).then((()=>{s.nk.success("已操作")})).catch((()=>{s.nk.success("操作失败")}))},a=()=>{o()};return(0,n.sV)((()=>{t()})),{state:l,handleChange:a}}},f=t(1241);const g=(0,f.A)(p,[["render",r]]);var h=g},1557:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var n=t(6768),o=t(4232);function a(e,l,t,a,r,i){const u=(0,n.g2)("Version"),s=(0,n.g2)("el-input"),d=(0,n.g2)("el-table-column"),c=(0,n.g2)("Delete"),p=(0,n.g2)("el-icon"),f=(0,n.g2)("el-button"),g=(0,n.g2)("el-popconfirm"),h=(0,n.g2)("Plus"),b=(0,n.g2)("Select"),m=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(u,{ckey:"signServers"}),(0,n.bF)(m,{data:a.state.list,border:"",size:"small",width:"100%",height:`${a.state.height}px`,onCellDblclick:a.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(d,{prop:"Name",label:"名称"},{default:(0,n.k6)((e=>[e.row.NameEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>a.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Name),1)],64))])),_:1}),(0,n.bF)(d,{prop:"Host",label:"地址"},{default:(0,n.k6)((e=>[e.row.HostEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Host,"onUpdate:modelValue":l=>e.row.Host=l,onBlur:l=>a.handleEditBlur(e.row,"Host")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Host),1)],64))])),_:1}),(0,n.bF)(d,{prop:"Oper",label:"操作",width:"150"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(g,{title:"删除不可逆，是否确认?",onConfirm:l=>a.handleDel(e.$index)},{reference:(0,n.k6)((()=>[(0,n.bF)(f,{type:"danger",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,n.bF)(f,{type:"primary",size:"small",onClick:l=>a.handleAdd(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(h)])),_:1})])),_:2},1032,["onClick"]),a.state.server!=e.row.Host?((0,n.uX)(),(0,n.Wv)(f,{key:0,size:"small",onClick:l=>a.handleUse(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(b)])),_:1})])),_:2},1032,["onClick"])):(0,n.Q3)("",!0)])])),_:1})])),_:1},8,["data","height","onCellDblclick"])],64)}var r=t(9299),i=t(3830),u=t(1219),s=t(144),d=t(8662),c=t(7477),p={label:"信标服务器",name:"signInServers",order:0,components:{Version:d["default"],Delete:c.epd,Plus:c.FWt,Select:c.l6P},setup(e){const l=(0,i.B)(),t=(0,s.Kh)({list:l.value.config.Running.Client.Servers||[],server:(0,n.EW)((()=>l.value.config.Client.Server)),height:(0,n.EW)((()=>l.value.height-127))});(0,n.wB)((()=>l.value.config.Running.Client.Servers),(()=>{0==t.list.filter((e=>e["__editing"])).length&&(t.list=l.value.config.Running.Client.Servers)}));const o=(e,l)=>{a(e,l.property)},a=(e,l)=>{t.list.forEach((e=>{e["NameEditing"]=!1,e["HostEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},d=(e,l)=>{e[`${l}Editing`]=!1,e["__editing"]=!1,g()},c=e=>{t.list.splice(e,1),g()},p=e=>{t.list.filter((e=>""==e.Host||""==e.Name)).length>0||(t.list.splice(e+1,0,{Name:"",Host:""}),g())},f=e=>{const l=t.list[e];t.list[e]=t.list[0],t.list[0]=l,g()},g=()=>{(0,r.jU)(t.list).then((()=>{u.nk.success("已操作")})).catch((()=>{u.nk.success("操作失败")}))};return{state:t,handleCellClick:o,handleEditBlur:d,handleDel:c,handleAdd:p,handleUse:f}}},f=t(1241);const g=(0,f.A)(p,[["render",a]]);var h=g},1436:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return g}});var n=t(6768);function o(e,l,t,o,a,r){const i=(0,n.g2)("Version"),u=(0,n.g2)("el-table-column"),s=(0,n.g2)("el-option"),d=(0,n.g2)("el-select"),c=(0,n.g2)("el-switch"),p=(0,n.g2)("el-input-number"),f=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i,{ckey:"tunnelTransports"}),(0,n.bF)(f,{data:o.state.list,border:"",size:"small",width:"100%",height:`${o.state.height}px`},{default:(0,n.k6)((()=>[(0,n.bF)(u,{prop:"Name",label:"名称",width:"120"}),(0,n.bF)(u,{prop:"Label",label:"说明"}),(0,n.bF)(u,{prop:"ProtocolType",label:"协议",width:"60"}),(0,n.bF)(u,{prop:"BufferSize",label:"缓冲区",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(d,{modelValue:e.row.BufferSize,"onUpdate:modelValue":l=>e.row.BufferSize=l,placeholder:"Select",size:"small",onChange:o.handleSave},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.state.bufferSize,((e,l)=>((0,n.uX)(),(0,n.Wv)(s,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(u,{property:"Reverse",label:"反向",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(c,{disabled:e.row.DisableReverse,modelValue:e.row.Reverse,"onUpdate:modelValue":l=>e.row.Reverse=l,onChange:o.handleSave,"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(u,{property:"SSL",label:"SSL",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(c,{disabled:e.row.DisableSSL,modelValue:e.row.SSL,"onUpdate:modelValue":l=>e.row.SSL=l,onChange:o.handleSave,"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(u,{property:"Disabled",label:"禁用",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(c,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,onChange:o.handleSave,"inline-prompt":"","active-text":"是","inactive-text":"否",style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(u,{prop:"Order",label:"调序",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(p,{modelValue:e.row.Order,"onUpdate:modelValue":l=>e.row.Order=l,min:1,max:255,onChange:o.handleOrderChange,size:"small"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1})])),_:1},8,["data","height"])],64)}var a=t(83),r=t(3830),i=t(1219),u=t(144),s=t(8662),d=t(7477),c={label:"打洞协议",name:"transports",order:2,components:{Version:s["default"],Delete:d.epd,Plus:d.FWt,Top:d.EjV,Bottom:d.i5o},setup(e){const l=(0,r.B)(),t=(0,u.Kh)({list:l.value.config.Running.Tunnel.Transports.sort(((e,l)=>e.Order-l.Order)),height:(0,n.EW)((()=>l.value.height-127)),bufferSize:l.value.bufferSize});(0,n.wB)((()=>l.value.config.Running.Tunnel.Transports),(()=>{t.list=l.value.config.Running.Tunnel.Transports.sort(((e,l)=>e.Order-l.Order))}));const o=()=>{s(t.list)},s=()=>{t.list=t.list.slice().sort(((e,l)=>e.Order-l.Order)),(0,a.$M)(t.list).then((()=>{i.nk.success("已操作")})).catch((()=>{i.nk.success("操作失败")}))};return{state:t,handleOrderChange:o,handleSave:s}}},p=t(1241);const f=(0,p.A)(c,[["render",o]]);var g=f},5178:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var n=t(6768),o=t(4232);function a(e,l,t,a,r,i){const u=(0,n.g2)("Version"),s=(0,n.g2)("el-input"),d=(0,n.g2)("el-table-column"),c=(0,n.g2)("el-option"),p=(0,n.g2)("el-select"),f=(0,n.g2)("el-switch"),g=(0,n.g2)("Top"),h=(0,n.g2)("el-icon"),b=(0,n.g2)("el-button"),m=(0,n.g2)("Bottom"),k=(0,n.g2)("Delete"),v=(0,n.g2)("el-popconfirm"),y=(0,n.g2)("Plus"),w=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(u,{ckey:"tunnelWanPortProtocols"}),(0,n.bF)(w,{data:a.state.list,border:"",size:"small",width:"100%",height:`${a.state.height}px`,onCellDblclick:a.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(d,{prop:"Name",label:"名称"},{default:(0,n.k6)((e=>[e.row.NameEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,onBlur:l=>a.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Name),1)],64))])),_:1}),(0,n.bF)(d,{prop:"ProtocolType",label:"协议",width:"100"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(p,{modelValue:e.row.ProtocolType,"onUpdate:modelValue":l=>e.row.ProtocolType=l,placeholder:"Select",size:"small",onChange:l=>a.handleEditBlur(e.row,"ProtocolType")},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.row.Protocols,((e,l)=>((0,n.uX)(),(0,n.Wv)(c,{key:+l,label:e,value:+l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),(0,n.bF)(d,{prop:"Type",label:"类别",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(p,{modelValue:e.row.Type,"onUpdate:modelValue":l=>e.row.Type=l,placeholder:"Select",size:"small",onChange:l=>a.handleEditBlur(e.row,"Type")},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.state.types,(e=>((0,n.uX)(),(0,n.Wv)(c,{key:e.Value,label:e.Name,value:e.Value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(d,{prop:"Host",label:"地址"},{default:(0,n.k6)((e=>[e.row.HostEditing?((0,n.uX)(),(0,n.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Host,"onUpdate:modelValue":l=>e.row.Host=l,onBlur:l=>a.handleEditBlur(e.row,"Host")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,o.v_)(e.row.Host),1)],64))])),_:1}),(0,n.bF)(d,{property:"Disabled",label:"禁用",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(f,{modelValue:e.row.Disabled,"onUpdate:modelValue":l=>e.row.Disabled=l,onChange:l=>a.handleEditBlur(e.row,"Disabled"),"inline-prompt":"","active-text":"是","inactive-text":"否",style:{"--el-switch-on-color":"red","--el-switch-off-color":"#ddd"}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,n.bF)(d,{prop:"Sort",label:"调序",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(b,{size:"small",onClick:l=>a.handleSort(e.$index,-1)},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(g)])),_:1})])),_:2},1032,["onClick"]),(0,n.bF)(b,{size:"small",onClick:l=>a.handleSort(e.$index,1)},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(m)])),_:1})])),_:2},1032,["onClick"])])])),_:1}),(0,n.bF)(d,{prop:"Oper",label:"操作",width:"104",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(v,{title:"删除不可逆，是否确认?",onConfirm:l=>a.handleDel(e.$index)},{reference:(0,n.k6)((()=>[(0,n.bF)(b,{type:"danger",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(k)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,n.bF)(b,{type:"primary",size:"small",onClick:l=>a.handleAdd(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(y)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","height","onCellDblclick"])],64)}var r=t(83),i=t(3830),u=t(1219),s=t(144),d=t(8662),c=t(7477),p={label:"端口服务器",name:"tunnelServers",order:1,components:{Version:d["default"],Delete:c.epd,Plus:c.FWt,Top:c.EjV,Bottom:c.i5o},setup(e){const l=(0,i.B)(),t=l.value.config.Running.Tunnel.Servers.sort(((e,l)=>e.Disabled-l.Disabled)),o=(0,s.Kh)({list:t,types:[],height:(0,n.EW)((()=>l.value.height-127))});(0,n.wB)((()=>l.value.config.Running.Tunnel.Servers),(()=>{0==o.list.filter((e=>e["__editing"])).length&&(o.list=l.value.config.Running.Tunnel.Servers.sort(((e,l)=>e.Disabled-l.Disabled)))}));const a=()=>{(0,r.ix)().then((e=>{o.types=e,d(o.list)}))},d=e=>{e.forEach((e=>{e.Protocols=o.types.filter((l=>l.Value==e.Type))[0].Protocols,e.Protocols[e.ProtocolType]||(e.ProtocolType=+Object.keys(e.Protocols)[0])}))},c=(e,l)=>{p(e,l.property)},p=(e,l)=>{d([e]),o.list.forEach((e=>{e["NameEditing"]=!1,e["TypeEditing"]=!1,e["HostEditing"]=!1,e["ProtocolTypeEditing"]=!1})),e[`${l}Editing`]=!0,e["__editing"]=!0},f=(e,l)=>{d([e]),e[`${l}Editing`]=!1,e["__editing"]=!1,m()},g=e=>{o.list.splice(e,1),m()},h=e=>{if(o.list.filter((e=>""==e.Host||""==e.Name)).length>0)return;const l={Name:"",Host:"",Type:0,Disabled:!1,ProtocolType:2};d([l]),o.list.splice(e+1,0,l),m()},b=(e,l)=>{const t=o.list[e],n=o.list[e+l];t&&n&&(o.list[e+l]=t,o.list[e]=n),m(o.list)},m=()=>{o.list=o.list.slice().sort(((e,l)=>e.Disabled-l.Disabled)),(0,r.b0)(o.list).then((()=>{u.nk.success("已操作")})).catch((()=>{u.nk.success("操作失败")}))};return(0,n.sV)((()=>{a()})),{state:o,handleCellClick:c,handleEditBlur:f,handleDel:g,handleAdd:h,handleSort:b}}},f=t(1241);const g=(0,f.A)(p,[["render",a]]);var h=g},6026:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return h}});var n=t(6768);const o={style:{width:"30rem",padding:"5rem 0",margin:"0 auto"}},a=(0,n.Lk)("p",{class:"t-c"}," 服务器更新密钥 ",-1);function r(e,l,t,r,i,u){const s=(0,n.g2)("Version"),d=(0,n.g2)("el-input");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(s,{ckey:"updater"}),(0,n.Lk)("div",o,[a,(0,n.Lk)("p",null,[(0,n.bF)(d,{type:"password","show-password":"",modelValue:r.state.secretKey,"onUpdate:modelValue":l[0]||(l[0]=e=>r.state.secretKey=e),maxlength:"36",onBlur:r.handleChange},null,8,["modelValue","onBlur"])])])],64)}var i=t(920),u=t(3830),s=t(1219),d=t(144),c=t(8662),p={label:"服务器更新",name:"updater",order:6,components:{Version:c["default"]},setup(e){(0,u.B)();const l=(0,d.Kh)({secretKey:""}),t=()=>{(0,i.yN)().then((e=>{l.secretKey=e}))},o=()=>{l.secretKey&&(0,i.ir)(l.secretKey).then((()=>{s.nk.success("已操作")})).catch((()=>{s.nk.success("操作失败")}))},a=()=>{o()};return(0,n.sV)((()=>{t()})),{state:l,handleChange:a}}},f=t(1241);const g=(0,f.A)(p,[["render",r]]);var h=g},8662:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return m}});var n=t(6768),o=t(4232);const a=e=>((0,n.Qi)("data-v-35014fb5"),e=e(),(0,n.jt)(),e),r={class:"running-version-wrap flex"},i=a((()=>(0,n.Lk)("span",null,"高版本一端自动同步到低版本一端",-1))),u=a((()=>(0,n.Lk)("span",{class:"flex-1"},null,-1)));function s(e,l,t,a,s,d){const c=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("span",null,"配置版本 : "+(0,o.v_)(a.version||1),1),(0,n.bF)(c,{size:"small",onClick:a.handleEdit},{default:(0,n.k6)((()=>[(0,n.eW)("手动修改版本")])),_:1},8,["onClick"]),i,u,(0,n.RG)(e.$slots,"default",{},void 0,!0)])}var d=t(4);const c=e=>(0,d.zG)("RunningConfig/UpdateVersion",e);var p=t(3830),f=t(2933),g={props:["ckey"],setup(e){const l=(0,p.B)(),t=(0,n.EW)((()=>l.value.config.Running.Versions[e.ckey])),o=()=>{f.s.prompt("输入你要修改到的版本","修改版本",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.value,inputPattern:/\d+/,inputErrorMessage:"Invalid Number"}).then((({value:l})=>{l=+l,isNaN(l)||c({key:e.ckey,version:l})})).catch((()=>{}))};return{version:t,handleEdit:o}}},h=t(1241);const b=(0,h.A)(g,[["render",s],["__scopeId","data-v-35014fb5"]]);var m=b},2067:function(e,l,t){var n={"./ExcludeIP.vue":4378,"./Index.vue":2820,"./RelayServers.vue":4780,"./SForward.vue":6093,"./SignInServers.vue":1557,"./Transports.vue":1436,"./TunnelServers.vue":5178,"./Updater.vue":6026,"./Version.vue":8662};function o(e){var l=a(e);return t(l)}function a(e){if(!t.o(n,e)){var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=2067}}]);