"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[223],{5223:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});var n=l(6768);const o={class:"action-wrap"};function s(e,t,l,s,i,r){const a=(0,n.g2)("el-table-column"),c=(0,n.g2)("el-input"),u=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(u,{data:s.state.list,border:"",size:"small",width:"100%",height:`${s.state.height}px`,onCellDblclick:s.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(a,{prop:"Name",label:"服务器名称",width:"140"}),(0,n.bF)(a,{prop:"Host",label:"服务器地址",width:"200"}),(0,n.bF)(a,{prop:"json",label:"Json参数"},{default:(0,n.k6)((e=>[e.row.jsonEditing?((0,n.uX)(),(0,n.Wv)(c,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.json,"onUpdate:modelValue":t=>e.row.json=t,onBlur:t=>s.handleEditBlur(e.row,"json")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[],64))])),_:1})])),_:1},8,["data","height","onCellDblclick"])])}var i=l(4);const r=e=>(0,i.zG)("action/SetServerArgs",e);l(9299);var a=l(3830),c=l(1219),u=l(144),d={label:"验证",name:"action",order:0,setup(e){const t=(0,a.B)(),l=(0,u.Kh)({list:[],height:(0,n.EW)((()=>t.value.height-20))});(0,n.wB)((()=>t.value.config.Client.Servers),(()=>{o()}));const o=()=>{if(0==l.list.filter((e=>e["__editing"])).length){const e=t.value.config.Client.Action.Args;l.list=t.value.config.Client.Servers.map((t=>Object.assign(t,{json:e[t.Host]||""})))}},s=(e,t)=>{i(e,t.property)},i=(e,t)=>{e[`${t}Editing`]=!0,e["__editing"]=!0},d=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1,h()},h=()=>{if(l.list.filter((e=>{try{return!(!e.json||"object"==typeof JSON.parse(e.json))}catch(t){return!0}})).length>0)return void c.nk.error("Json格式错误");const e=l.list.reduce(((e,t,l)=>(e[t.Host]=t.json,e)),{});console.log(e),r(e).then((()=>{c.nk.success("已操作")})).catch((()=>{c.nk.success("操作失败")}))};return(0,n.sV)((()=>{o()})),{state:l,handleCellClick:s,handleEditBlur:d}}},h=l(1241);const p=(0,h.A)(d,[["render",s],["__scopeId","data-v-07b8e00f"]]);var g=p}}]);