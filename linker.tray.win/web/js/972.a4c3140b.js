"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[972],{9232:function(e,t,l){l.d(t,{W4:function(){return r},q:function(){return n},uQ:function(){return o}});var a=l(4);const n=e=>(0,a.zG)("relay/SetServers",e),r=()=>(0,a.zG)("relay/Subscribe"),o=e=>(0,a.zG)("relay/Connect",e)},743:function(e,t,l){l.d(t,{Ap:function(){return n},Co:function(){return r},DY:function(){return u},Qs:function(){return i},a9:function(){return s},eX:function(){return c},gz:function(){return d},pY:function(){return o}});var a=l(4);const n=()=>(0,a.zG)("sforwardclient/GetSecretKey"),r=e=>(0,a.zG)("sforwardclient/SetSecretKey",e),o=e=>(0,a.zG)("sforwardclient/get",e),s=()=>(0,a.zG)("sforwardclient/refresh"),d=(e="0")=>(0,a.zG)("sforwardclient/getcount",e),u=e=>(0,a.zG)("sforwardclient/remove",e),i=e=>(0,a.zG)("sforwardclient/add",e),c=e=>(0,a.zG)("sforwardclient/TestLocal",e)},920:function(e,t,l){l.d(t,{BJ:function(){return i},NS:function(){return o},UB:function(){return p},Vk:function(){return u},aP:function(){return h},ir:function(){return d},lJ:function(){return r},mK:function(){return n},y2:function(){return c},yN:function(){return s}});var a=l(4);const n=(e="0")=>(0,a.zG)("updaterclient/get",e),r=e=>(0,a.zG)("updaterclient/confirm",e),o=e=>(0,a.zG)("updaterclient/exit",e),s=()=>(0,a.zG)("updaterclient/GetSecretKey"),d=e=>(0,a.zG)("updaterclient/SetSecretKey",e),u=()=>(0,a.zG)("updaterclient/getcurrent"),i=()=>(0,a.zG)("updaterclient/getserver"),c=e=>(0,a.zG)("updaterclient/confirmserver",e),h=()=>(0,a.zG)("updaterclient/exitserver"),p=()=>(0,a.zG)("updaterclient/Subscribe")},4972:function(e,t,l){l.r(t),l.d(t,{default:function(){return re}});var a=l(6768);const n={key:0,class:"servers-wrap"};function r(e,t,l,r,o,s){const d=(0,a.g2)("SignInServers"),u=(0,a.g2)("el-tab-pane"),i=(0,a.g2)("Groups"),c=(0,a.g2)("Async"),h=(0,a.g2)("el-tabs");return r.hasConfig?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(h,{type:"border-card",style:{width:"100%"},modelValue:r.state.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.tab=e)},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"信标服务器",name:"signin"},{default:(0,a.k6)((()=>[(0,a.bF)(d)])),_:1}),(0,a.bF)(u,{label:"分组设置",name:"groups"},{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}),r.hasSync?((0,a.uX)(),(0,a.Wv)(u,{key:0,label:"配置同步",name:"async"},{default:(0,a.k6)((()=>[(0,a.bF)(c)])),_:1})):(0,a.Q3)("",!0)])),_:1},8,["modelValue"])])):(0,a.Q3)("",!0)}var o=l(144),s=l(3830),d=l(4232);const u={class:"flex"},i=(0,a.Lk)("span",null,"服务器地址。ip:端口 或者 域名:端口",-1),c={class:"flex"},h=(0,a.Lk)("span",null,"密钥正确时可连接服务器",-1),p={class:"t-c"};function g(e,t,l,n,r,o){const s=(0,a.g2)("el-input"),g=(0,a.g2)("el-form-item"),m=(0,a.g2)("RelayServers"),k=(0,a.g2)("SForward"),f=(0,a.g2)("Updater"),b=(0,a.g2)("el-form"),w=(0,a.g2)("el-button"),v=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",{class:"signin-wrap",style:(0,d.Tr)({height:`${n.state.height}px`})},[(0,a.bF)(v,{shadow:"never"},{header:(0,a.k6)((()=>[(0,a.eW)("服务器相关设置")])),footer:(0,a.k6)((()=>[(0,a.Lk)("div",p,[(0,a.bF)(w,{type:"success",onClick:n.handleSave},{default:(0,a.k6)((()=>[(0,a.eW)("确定更改")])),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(b,{"label-width":"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{label:"服务器地址"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",u,[(0,a.bF)(s,{class:"flex-1",modelValue:n.state.list.Host,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.list.Host=e),onChange:n.handleSave},null,8,["modelValue","onChange"]),i])])),_:1}),(0,a.bF)(g,{label:"信标密钥"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",c,[(0,a.bF)(s,{class:"flex-1",type:"password","show-password":"",maxlength:"36",modelValue:n.state.list.SecretKey,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.list.SecretKey=e),onChange:n.handleSave},null,8,["modelValue","onChange"]),h])])),_:1}),(0,a.bF)(m),(0,a.bF)(k),(0,a.bF)(f)])),_:1})])])),_:1})],4)}var m=l(9299),k=l(1219);const f={class:"flex"},b=(0,a.Lk)("span",null,"密钥正确时可使用内网穿透",-1);function w(e,t,l,n,r,o){const s=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item");return(0,a.uX)(),(0,a.Wv)(d,{label:"服务器穿透密钥"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",f,[(0,a.bF)(s,{class:"flex-1",type:"password","show-password":"",modelValue:n.state.SForwardSecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.SForwardSecretKey=e),maxlength:"36",onBlur:n.handleChange},null,8,["modelValue","onBlur"]),b])])),_:1})}var v=l(743),y={setup(e){const t=(0,o.Kh)({SForwardSecretKey:""}),l=()=>{(0,v.Ap)().then((e=>{t.SForwardSecretKey=e}))},n=()=>{t.SForwardSecretKey&&(0,v.Co)(t.SForwardSecretKey).then((()=>{k.nk.success("已操作")})).catch((()=>{k.nk.error("操作失败")}))},r=()=>{n()};return(0,a.sV)((()=>{l()})),{state:t,handleChange:r}}},C=l(1241);const F=(0,C.A)(y,[["render",w]]);var S=F;const _={class:"flex"},V=(0,a.Lk)("span",null,"密钥正确时可更新服务端",-1);function K(e,t,l,n,r,o){const s=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item");return(0,a.uX)(),(0,a.Wv)(d,{label:"服务器更新密钥"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",_,[(0,a.bF)(s,{class:"flex-1",type:"password","show-password":"",modelValue:n.state.secretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.secretKey=e),maxlength:"36",onBlur:n.handleChange},null,8,["modelValue","onBlur"]),V])])),_:1})}var G=l(920),x={setup(e){const t=(0,o.Kh)({secretKey:""}),l=()=>{(0,G.yN)().then((e=>{t.secretKey=e}))},n=()=>{t.secretKey&&(0,G.ir)(t.secretKey).then((()=>{k.nk.success("已操作")})).catch((()=>{k.nk.error("操作失败")}))},r=()=>{n()};return(0,a.sV)((()=>{l()})),{state:t,handleChange:r}}};const z=(0,C.A)(x,[["render",K]]);var E=z;const B={key:0},W={key:1},U={key:0},X={key:1},I={key:0},A={key:1};function L(e,t,l,n,r,o){const s=(0,a.g2)("el-input"),u=(0,a.g2)("el-checkbox"),i=(0,a.g2)("el-form-item"),c=(0,a.g2)("el-table-column"),h=(0,a.g2)("el-switch"),p=(0,a.g2)("el-table"),g=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(i,{label:"中继密钥"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{type:"password","show-password":"",modelValue:n.state.list.SecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.list.SecretKey=e),maxlength:"36",onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,a.bF)(u,{modelValue:n.state.list.SSL,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.list.SSL=e),label:"使用ssl",size:"large",onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,a.bF)(u,{modelValue:n.state.list.Disabled,"onUpdate:modelValue":t[2]||(t[2]=e=>n.state.list.Disabled=e),label:"禁用中继",size:"large",onChange:n.handleSave},null,8,["modelValue","onChange"]),(0,a.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>n.state.show=!0),class:(0,d.C4)(["delay a-line",{red:0==n.state.nodes.length,green:n.state.nodes.length>0}])}," 中继节点 : "+(0,d.v_)(n.state.nodes.length),3)])),_:1}),(0,a.bF)(g,{modelValue:n.state.show,"onUpdate:modelValue":t[4]||(t[4]=e=>n.state.show=e),title:"中继节点",width:"760",top:"2vh"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(p,{data:n.state.nodes,size:"small",border:"",height:"500"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{property:"Name",label:"名称"}),(0,a.bF)(c,{property:"MaxGbTotal",label:"月流量",width:"160"},{default:(0,a.k6)((e=>[0==e.row.MaxGbTotal?((0,a.uX)(),(0,a.CE)("span",B,"无限制")):((0,a.uX)(),(0,a.CE)("span",W,(0,d.v_)((e.row.MaxGbTotalLastBytes/1024/1024/1024).toFixed(2))+"GB / "+(0,d.v_)(e.row.MaxGbTotal)+"GB ",1))])),_:1}),(0,a.bF)(c,{property:"MaxBandwidthTotal",label:"总带宽",width:"80"},{default:(0,a.k6)((e=>[0==e.row.MaxBandwidthTotal?((0,a.uX)(),(0,a.CE)("span",U,"无限制")):((0,a.uX)(),(0,a.CE)("span",X,(0,d.v_)(e.row.MaxBandwidthTotal)+"Mbps",1))])),_:1}),(0,a.bF)(c,{property:"MaxBandwidth",label:"连接带宽",width:"80"},{default:(0,a.k6)((e=>[0==e.row.MaxBandwidth?((0,a.uX)(),(0,a.CE)("span",I,"无限制")):((0,a.uX)(),(0,a.CE)("span",A,(0,d.v_)(e.row.MaxBandwidth)+"Mbps",1))])),_:1}),(0,a.bF)(c,{property:"ConnectionRatio",label:"连接数",width:"60"},{default:(0,a.k6)((e=>[(0,a.Lk)("span",null,(0,d.v_)(100*e.row.ConnectionRatio)+"%",1)])),_:1}),(0,a.bF)(c,{property:"Delay",label:"延迟",width:"60"},{default:(0,a.k6)((e=>[(0,a.Lk)("span",null,(0,d.v_)(e.row.Delay)+"ms",1)])),_:1}),(0,a.bF)(c,{property:"Public",label:"公开",width:"60"},{default:(0,a.k6)((e=>[(0,a.bF)(h,{disabled:"",modelValue:e.row.Public,"onUpdate:modelValue":t=>e.row.Public=t,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])],64)}var P=l(9232),T={setup(e){const t=(0,s.B)(),l=(0,o.Kh)({list:t.value.config.Client.Relay.Server,show:!1,nodes:[],timer:0});(0,a.wB)((()=>t.value.config.Client.Relay.Server),(()=>{l.list.Delay=t.value.config.Client.Relay.Server.Delay}));const n=()=>{(0,P.q)(l.list).then((()=>{k.nk.success("已操作")})).catch((()=>{k.nk.error("操作失败")}))},r=()=>{(0,P.W4)().then((e=>{l.nodes=e,l.timer=setTimeout(r,1e3)})).catch((()=>{l.timer=setTimeout(r,1e3)}))};return(0,a.sV)((()=>{r()})),(0,a.hi)((()=>{clearTimeout(l.timer)})),{state:l,handleSave:n}}};const D=(0,C.A)(T,[["render",L],["__scopeId","data-v-27bd6915"]]);var N=D,M={components:{SForward:S,Updater:E,RelayServers:N},setup(e){const t=(0,s.B)(),l=(0,o.Kh)({list:t.value.config.Client.ServerInfo,height:(0,a.EW)((()=>t.value.height-90))}),n=()=>{(0,m.jU)(l.list).then((()=>{k.nk.success("已操作")})).catch((()=>{k.nk.error("操作失败")}))};return{state:l,handleSave:n}}};const R=(0,C.A)(M,[["render",g]]);var $=R;function Q(e,t,l,n,r,o){const s=(0,a.g2)("el-input"),u=(0,a.g2)("el-table-column"),i=(0,a.g2)("Delete"),c=(0,a.g2)("el-icon"),h=(0,a.g2)("el-button"),p=(0,a.g2)("el-popconfirm"),g=(0,a.g2)("Plus"),m=(0,a.g2)("el-table");return(0,a.uX)(),(0,a.Wv)(m,{stripe:"",data:n.state.list,border:"",size:"small",width:"100%",height:`${n.state.height}px`,onCellDblclick:n.handleCellClick},{default:(0,a.k6)((()=>[(0,a.bF)(u,{prop:"Name",label:"名称",width:"100"},{default:(0,a.k6)((e=>[e.row.NameEditing?((0,a.uX)(),(0,a.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>n.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,d.v_)(e.row.Name),1)],64))])),_:1}),(0,a.bF)(u,{prop:"Id",label:"Id"},{default:(0,a.k6)((e=>[e.row.IdEditing?((0,a.uX)(),(0,a.Wv)(s,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>n.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,d.v_)(e.row.Id),1)],64))])),_:1}),(0,a.bF)(u,{prop:"Password",label:"密码"},{default:(0,a.k6)((e=>[e.row.PasswordEditing?((0,a.uX)(),(0,a.Wv)(s,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>n.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,d.v_)(e.row.Password.replace(/.{1}/g,"*")),1)],64))])),_:1}),(0,a.bF)(u,{prop:"Oper",label:"操作",width:"110"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",null,[(0,a.bF)(p,{title:"删除不可逆，是否确认?",onConfirm:t=>n.handleDel(e.$index)},{reference:(0,a.k6)((()=>[(0,a.bF)(h,{type:"danger",size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,a.bF)(h,{type:"primary",size:"small",onClick:t=>n.handleAdd(e.$index)},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(g)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","height","onCellDblclick"])}var j=l(7477),q={components:{Delete:j.epd,Plus:j.FWt,Select:j.l6P},setup(e){const t=(0,s.B)(),l=(0,o.Kh)({list:t.value.config.Client.Groups||[],height:(0,a.EW)((()=>t.value.height-90))});(0,a.wB)((()=>t.value.config.Client.Groups),(()=>{0==l.list.filter((e=>e["__editing"])).length&&(l.list=t.value.config.Client.Groups)}));const n=(e,t)=>{r(e,t.property)},r=(e,t)=>{l.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},d=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1,c()},u=e=>{l.list.splice(e,1),c()},i=e=>{l.list.filter((e=>""==e.Id||""==e.Name)).length>0||(l.list.splice(e+1,0,{Name:"",Id:"",Password:""}),c())},c=()=>{(0,m.zp)(l.list).then((()=>{k.nk.success("已操作")})).catch((()=>{k.nk.error("操作失败")}))};return{state:l,handleCellClick:n,handleEditBlur:d,handleDel:u,handleAdd:i}}};const H=(0,C.A)(q,[["render",Q]]);var J=H;const Y={class:"t-c"};function O(e,t,l,n,r,o){const s=(0,a.g2)("el-checkbox"),u=(0,a.g2)("el-col"),i=(0,a.g2)("el-row"),c=(0,a.g2)("el-checkbox-group"),h=(0,a.g2)("el-button"),p=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",{style:(0,d.Tr)({height:`${n.state.height}px`})},[(0,a.bF)(p,{shadow:"never"},{header:(0,a.k6)((()=>[(0,a.eW)("选择你需要同步的项，将这些配置同步到本组所有客户端")])),footer:(0,a.k6)((()=>[(0,a.Lk)("div",Y,[(0,a.bF)(h,{type:"success",onClick:n.handleSync},{default:(0,a.k6)((()=>[(0,a.eW)("确定同步")])),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(s,{modelValue:n.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state.checkAll=e),indeterminate:n.state.isIndeterminate,onChange:n.handleCheckAllChange},{default:(0,a.k6)((()=>[(0,a.eW)("全选")])),_:1},8,["modelValue","indeterminate","onChange"]),(0,a.bF)(c,{modelValue:n.state.checkeds,"onUpdate:modelValue":t[1]||(t[1]=e=>n.state.checkeds=e),onChange:n.handleCheckedsChange},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.state.names,(e=>((0,a.uX)(),(0,a.Wv)(u,{span:8},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.Wv)(s,{key:e.name,label:e.label,value:e.name},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(e.label),1)])),_:2},1032,["label","value"]))])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1})],4)}var Z=l(8835),ee={label:"同步配置",name:"async",order:7,setup(e){const t=(0,s.B)(),l=(0,o.Kh)({names:[],checkAll:!1,isIndeterminate:!1,checkeds:[],height:(0,a.EW)((()=>t.value.height-90))}),n=e=>{l.checkeds=e?l.names.map((e=>e.name)):[],l.isIndeterminate=!1},r=e=>{const t=e.length;l.checkAll=t===l.names.length,l.isIndeterminate=t>0&&t<l.names.length},d={SignInSecretKey:"当前信标密钥",GroupSecretKey:"当前分组密码",RelaySecretKey:"当前中继密钥",SForwardSecretKey:"当前服务器穿透密钥",UpdaterSecretKey:"服务器更新密钥",TunnelTransports:"打洞协议列表"};(0,a.sV)((()=>{(0,Z.Iv)().then((e=>{l.names=e.map((e=>({name:e,label:d[e]})))}))}));const u=()=>{0!=l.checkeds.length?(0,Z.E1)(l.checkeds).then((e=>{k.nk.success("已操作")})):k.nk.error("至少选择一个")};return{state:l,handleCheckAllChange:n,handleCheckedsChange:r,handleSync:u}}};const te=(0,C.A)(ee,[["render",O]]);var le=te,ae={components:{SignInServers:$,Groups:J,Async:le},setup(e){const t=(0,s.B)(),l=(0,a.EW)((()=>t.value.hasAccess("Config"))),n=(0,a.EW)((()=>t.value.hasAccess("Sync"))),r=(0,o.Kh)({tab:"signin"});return{state:r,hasConfig:l,hasSync:n}}};const ne=(0,C.A)(ae,[["render",r],["__scopeId","data-v-11926c68"]]);var re=ne}}]);