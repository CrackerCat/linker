"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[734],{8933:function(e,r,l){l.r(r),l.d(r,{default:function(){return Fe}});var a=l(6768);const t={class:"app-wrap flex flex-column flex-nowrap"},o={class:"head"},s={class:"body flex-1 relative",ref:"wrap"},u={class:"home absolute"},n={class:"status"};function d(e,r,l,d,m,i){const f=(0,a.g2)("Head"),c=(0,a.g2)("router-view"),b=(0,a.g2)("Status"),p=(0,a.g2)("Install");return(0,a.uX)(),(0,a.CE)("div",t,[(0,a.Lk)("div",o,[(0,a.bF)(f)]),(0,a.Lk)("div",s,[(0,a.Lk)("div",u,[(0,a.bF)(c)])],512),(0,a.Lk)("div",n,[(0,a.bF)(b,{config:!0}),(0,a.bF)(p)])])}l(4114);var m=l.p+"img/logo.892cb2fb.png",i=l.p+"img/shouye.4c820c0e.svg",f=l.p+"img/fuwuqi.247f2561.svg",c=l.p+"img/dadong.e6fd78bf.svg",b=l.p+"img/anquan.5f8d5e47.svg",p=l.p+"img/rizhi.c3ca751b.svg";const v=e=>((0,a.Qi)("data-v-288c64ff"),e=e(),(0,a.jt)(),e),g={class:"head flex"},k={class:"logo"},F=v((()=>(0,a.Lk)("img",{src:m,alt:""},null,-1))),w={class:"menu flex-1"},y={class:"flex"},h=v((()=>(0,a.Lk)("img",{src:i},null,-1))),S={key:0},_=v((()=>(0,a.Lk)("img",{src:f},null,-1))),K={key:1},V=v((()=>(0,a.Lk)("img",{src:c},null,-1))),P={key:2},C=v((()=>(0,a.Lk)("img",{src:b},null,-1))),x={key:3},L=v((()=>(0,a.Lk)("img",{src:p},null,-1))),W={class:"image"};function U(e,r,l,t,o,s){const u=(0,a.g2)("router-link"),n=(0,a.g2)("Background");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",g,[(0,a.Lk)("div",k,[(0,a.bF)(u,{to:{name:"FullIndex"}},{default:(0,a.k6)((()=>[F])),_:1})]),(0,a.Lk)("div",w,[(0,a.Lk)("ul",y,[(0,a.Lk)("li",null,[(0,a.bF)(u,{to:{name:"FullIndex"}},{default:(0,a.k6)((()=>[h,(0,a.eW)(" 首页")])),_:1})]),t.hasConfig?((0,a.uX)(),(0,a.CE)("li",S,[(0,a.bF)(u,{to:{name:"FullServers"}},{default:(0,a.k6)((()=>[_,(0,a.eW)(" 服务器")])),_:1})])):(0,a.Q3)("",!0),t.hasTransport?((0,a.uX)(),(0,a.CE)("li",K,[(0,a.bF)(u,{to:{name:"FullTransport"}},{default:(0,a.k6)((()=>[V,(0,a.eW)(" 打洞协议")])),_:1})])):(0,a.Q3)("",!0),t.hasAction?((0,a.uX)(),(0,a.CE)("li",P,[(0,a.bF)(u,{to:{name:"FullAction"}},{default:(0,a.k6)((()=>[C,(0,a.eW)(" 自定义验证")])),_:1})])):(0,a.Q3)("",!0),t.hasLogger?((0,a.uX)(),(0,a.CE)("li",x,[(0,a.bF)(u,{to:{name:"FullLogger"}},{default:(0,a.k6)((()=>[L,(0,a.eW)(" 日志")])),_:1})])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",W,[(0,a.bF)(n,{name:"full"})])])])}var A=l(7477),X=l(3830),j=l(5096),Q={components:{Promotion:A.Yk4,StarFilled:A.BQ2,WarnTriangleFilled:A.DtC,PhoneFilled:A.pXb,HelpFilled:A.adD,Background:j.A},setup(){const e=(0,X.B)(),r=(0,a.EW)((()=>e.value.hasAccess("Config"))),l=(0,a.EW)((()=>e.value.hasAccess("LoggerShow"))),t=(0,a.EW)((()=>e.value.hasAccess("Transport"))),o=(0,a.EW)((()=>e.value.hasAccess("Action")));return{hasConfig:r,hasLogger:l,hasTransport:t,hasAction:o}}},E=l(1241);const N=(0,E.A)(Q,[["render",U],["__scopeId","data-v-288c64ff"]]);var I=N,q=l(3269);const R=e=>((0,a.Qi)("data-v-41d4c7eb"),e=e(),(0,a.jt)(),e),D={class:"head"},B={class:"body"},O=R((()=>(0,a.Lk)("div",{class:"t-c"},"完成保存后，请重启软件",-1))),T={class:"footer t-c"};function J(e,r,l,t,o,s){const u=(0,a.g2)("el-step"),n=(0,a.g2)("el-steps"),d=(0,a.g2)("Common"),m=(0,a.g2)("el-card"),i=(0,a.g2)("Server"),f=(0,a.g2)("Client"),c=(0,a.g2)("el-button"),b=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(b,{modelValue:t.state.show,"onUpdate:modelValue":r[0]||(r[0]=e=>t.state.show=e),title:"初始化配置",width:"600",top:"2vh"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.Lk)("div",D,[(0,a.bF)(n,{active:t.step.step,"finish-status":"success"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.state.steps,((e,r)=>((0,a.uX)(),(0,a.Wv)(u,{title:e},null,8,["title"])))),256))])),_:1},8,["active"])]),(0,a.Lk)("div",B,[1==t.step.step?((0,a.uX)(),(0,a.Wv)(m,{key:0,shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{ref:"currentDom"},null,512)])),_:1})):(0,a.Q3)("",!0),2==t.step.step?((0,a.uX)(),(0,a.Wv)(m,{key:1,shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{ref:"currentDom"},null,512)])),_:1})):(0,a.Q3)("",!0),3==t.step.step?((0,a.uX)(),(0,a.Wv)(m,{key:2,shadow:"never"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{ref:"currentDom"},null,512)])),_:1})):(0,a.Q3)("",!0),4==t.step.step?((0,a.uX)(),(0,a.Wv)(m,{key:3,shadow:"never"},{default:(0,a.k6)((()=>[O])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("div",T,[(0,a.bF)(c,{disabled:t.step.step<=1,onClick:t.handlePrev},{default:(0,a.k6)((()=>[(0,a.eW)("上一步")])),_:1},8,["disabled","onClick"]),t.step.step<t.state.steps.length?((0,a.uX)(),(0,a.Wv)(c,{key:0,type:"primary",onClick:t.handleNext},{default:(0,a.k6)((()=>[(0,a.eW)("下一步")])),_:1},8,["onClick"])):((0,a.uX)(),(0,a.Wv)(c,{key:1,type:"primary",onClick:t.handleSave},{default:(0,a.k6)((()=>[(0,a.eW)("完成")])),_:1},8,["onClick"]))])])])),_:1},8,["modelValue"])])}var H=l(8835),z=l(144),G=l(1219);const Y={class:"t-c"};function M(e,r,l,t,o,s){const u=(0,a.g2)("el-checkbox");return(0,a.uX)(),(0,a.CE)("div",Y,[(0,a.bF)(u,{modelValue:t.state.form.client,"onUpdate:modelValue":r[0]||(r[0]=e=>t.state.form.client=e),label:"作为客户端"},null,8,["modelValue"]),(0,a.bF)(u,{modelValue:t.state.form.server,"onUpdate:modelValue":r[1]||(r[1]=e=>t.state.form.server=e),label:"作为服务端"},null,8,["modelValue"])])}var Z={name:"Common",setup(){const e=(0,a.WQ)("step"),r=(0,z.Kh)({form:{client:e.value.form.common.client||e.value.json.Common&&e.value.json.Common.client||!0,server:e.value.form.common.server||e.value.json.Common&&e.value.json.Common.server||!1}}),l=e=>new Promise(((e,l)=>{r.form.client||r.form.server?e({json:{Common:{client:r.form.client,server:r.form.server,modes:[r.form.client?"client":"",r.form.server?"server":""].filter((e=>!!e))}},form:{common:JSON.parse(JSON.stringify(r.form))}}):(G.nk.error("请选择客户端或服务端"),l())}));return{state:r,handleValidate:l}}};const $=(0,E.A)(Z,[["render",M]]);var ee=$;const re=e=>((0,a.Qi)("data-v-19accc48"),e=e(),(0,a.jt)(),e),le=re((()=>(0,a.Lk)("div",{class:"t-c w-100"},[(0,a.Lk)("p",null,"端口为0则不监听，相同分组名之间的客户端相互可见")],-1)));function ae(e,r,l,t,o,s){const u=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-input"),d=(0,a.g2)("el-col"),m=(0,a.g2)("el-row"),i=(0,a.g2)("el-checkbox"),f=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(f,{ref:"formDom",model:t.state.form,rules:t.state.rules,"label-width":"8rem"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[le])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"机器名",prop:"name"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.name,"onUpdate:modelValue":r[0]||(r[0]=e=>t.state.form.name=e),maxlength:"12","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"网页端口",prop:"web"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{style:{width:"44.5rem"},modelValue:t.state.form.web,"onUpdate:modelValue":r[1]||(r[1]=e=>t.state.form.web=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"接口端口",prop:"api"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.api,"onUpdate:modelValue":r[2]||(r[2]=e=>t.state.form.api=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"接口密码",prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{type:"password",modelValue:t.state.form.password,"onUpdate:modelValue":r[3]||(r[3]=e=>t.state.form.password=e),"show-password":"",maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"分组名",prop:"groupid"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.groupid,"onUpdate:modelValue":r[4]||(r[4]=e=>t.state.form.groupid=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"分组密码",prop:"groupPassword"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.groupPassword,"onUpdate:modelValue":r[5]||(r[5]=e=>t.state.form.groupPassword=e),type:"password","show-password":"",maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:24},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"label-width":"8rem",prop:"hasServer"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:t.state.form.hasServer,"onUpdate:modelValue":r[6]||(r[6]=e=>t.state.form.hasServer=e),label:"我有服务器（私有部署服务端，使用自己的服务器）",size:"large"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),t.state.form.hasServer?((0,a.uX)(),(0,a.Wv)(u,{key:0,label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"信标服务",prop:"server"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.server,"onUpdate:modelValue":r[7]||(r[7]=e=>t.state.form.server=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"信标密钥",prop:"serverSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.serverSecretKey,"onUpdate:modelValue":r[8]||(r[8]=e=>t.state.form.serverSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),t.state.form.hasServer?((0,a.uX)(),(0,a.Wv)(u,{key:1,label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"穿透密钥",prop:"sForwardSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.sForwardSecretKey,"onUpdate:modelValue":r[9]||(r[9]=e=>t.state.form.sForwardSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"中继密钥",prop:"relaySecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.relaySecretKey,"onUpdate:modelValue":r[10]||(r[10]=e=>t.state.form.relaySecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),t.state.form.hasServer?((0,a.uX)(),(0,a.Wv)(u,{key:2,label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"更新密钥",prop:"updaterSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.updaterSecretKey,"onUpdate:modelValue":r[11]||(r[11]=e=>t.state.form.updaterSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"占位"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{disabled:"",maxlength:"36","show-word-limit":""})])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1},8,["model","rules"])])}var te={setup(e){const r=(0,a.WQ)("step"),l=(0,X.B)(),t=(0,z.Kh)({form:{name:r.value.form.client.name||l.value.config.Client.Name,groupid:r.value.form.client.groupid||l.value.config.Client.Group.Id,groupPassword:r.value.form.client.groupPassword||l.value.config.Client.Group.Password,api:r.value.form.client.api||l.value.config.Client.CApi.ApiPort,web:r.value.form.client.web||l.value.config.Client.CApi.WebPort,password:r.value.form.client.password||l.value.config.Client.CApi.ApiPassword,hasServer:r.value.form.client.hasServer||!1,server:r.value.form.client.server||l.value.config.Client.Server.Host,serverSecretKey:r.value.form.client.serverSecretKey||l.value.config.Client.ServerSecretKey,sForwardSecretKey:r.value.form.client.sForwardSecretKey||l.value.config.Client.SForward.SecretKey,relaySecretKey:r.value.form.client.relaySecretKey||(l.value.config.Client.Relay.Servers[0]||{SecretKey:"snltty"}).SecretKey,updaterSecretKey:r.value.form.client.updaterSecretKey||l.value.config.Client.Updater.SecretKey},rules:{name:[{required:!0,message:"必填",trigger:"blur"}],groupid:[{required:!0,message:"必填",trigger:"blur"}],groupPassword:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"}],api:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}],web:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}]}}),o=(0,z.KR)(null),s=()=>new Promise(((e,r)=>{o.value.validate((l=>{l?e({json:{Client:{name:t.form.name,groupid:t.form.groupid,groupPassword:t.form.groupPassword,api:+t.form.api,web:+t.form.web,password:t.form.password,hasServer:t.form.hasServer,server:t.form.server,serverSecretKey:t.form.serverSecretKey,sForwardSecretKey:t.form.sForwardSecretKey,relaySecretKey:t.form.relaySecretKey,updaterSecretKey:t.form.updaterSecretKey}},form:{client:JSON.parse(JSON.stringify(t.form))}}):r()}))}));return(0,a.sV)((()=>{0==r.value.json.Common.client&&(r.value.step+=r.value.increment)})),{state:t,handleValidate:s,formDom:o}}};const oe=(0,E.A)(te,[["render",ae],["__scopeId","data-v-19accc48"]]);var se=oe;const ue=e=>((0,a.Qi)("data-v-5cebfa33"),e=e(),(0,a.jt)(),e),ne=ue((()=>(0,a.Lk)("div",{class:"t-c w-100"},"端口为0则不监听",-1)));function de(e,r,l,t,o,s){const u=(0,a.g2)("el-form-item"),n=(0,a.g2)("el-input"),d=(0,a.g2)("el-col"),m=(0,a.g2)("el-row"),i=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(i,{ref:"formDom",model:t.state.form,rules:t.state.rules,"label-width":"10rem"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[ne])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"服务端口",prop:"servicePort"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.servicePort,"onUpdate:modelValue":r[0]||(r[0]=e=>t.state.form.servicePort=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"web穿透端口",prop:"webPort"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.webPort,"onUpdate:modelValue":r[1]||(r[1]=e=>t.state.form.webPort=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"开放最小端口",prop:"tunnelPort1"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.tunnelPort1,"onUpdate:modelValue":r[2]||(r[2]=e=>t.state.form.tunnelPort1=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"开放最大端口",prop:"tunnelPort2"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.tunnelPort2,"onUpdate:modelValue":r[3]||(r[3]=e=>t.state.form.tunnelPort2=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"穿透密钥",prop:"sForwardSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.sForwardSecretKey,"onUpdate:modelValue":r[4]||(r[4]=e=>t.state.form.sForwardSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"中继密钥",prop:"relaySecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.relaySecretKey,"onUpdate:modelValue":r[5]||(r[5]=e=>t.state.form.relaySecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(u,{label:"","label-width":"0"},{default:(0,a.k6)((()=>[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"信标密钥",prop:"signinSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.signinSecretKey,"onUpdate:modelValue":r[6]||(r[6]=e=>t.state.form.signinSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.bF)(d,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(u,{label:"更新密钥",prop:"updaterSecretKey"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:t.state.form.updaterSecretKey,"onUpdate:modelValue":r[7]||(r[7]=e=>t.state.form.updaterSecretKey=e),maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])}var me={setup(e){const r=(0,a.WQ)("step"),l=(0,X.B)(),t=(0,z.Kh)({show:!1,form:{signinSecretKey:r.value.form.server.signinSecretKey||l.value.config.Server.SignIn.SecretKey,relaySecretKey:r.value.form.server.relaySecretKey||l.value.config.Server.Relay.SecretKey,sForwardSecretKey:r.value.form.server.sForwardSecretKey||l.value.config.Server.SForward.SecretKey,servicePort:r.value.form.server.servicePort||l.value.config.Server.ServicePort,webPort:r.value.form.server.webPort||l.value.config.Server.SForward.WebPort,tunnelPort1:r.value.form.server.tunnelPort1||l.value.config.Server.SForward.TunnelPortRange[0],tunnelPort2:r.value.form.server.tunnelPort2||l.value.config.Server.SForward.TunnelPortRange[1],updaterSecretKey:r.value.form.server.updaterSecretKey||l.value.config.Server.Updater.SecretKey},rules:{relaySecretKey:[{required:!0,message:"必填",trigger:"blur"}],sForwardSecretKey:[{required:!0,message:"必填",trigger:"blur"}],servicePort:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}],webPort:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}],tunnelPort1:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}],tunnelPort2:[{required:!0,message:"必填",trigger:"blur"},{type:"number",min:0,max:65535,message:"数字 0-65535",trigger:"blur",transform(e){return Number(e)}}]}}),o=(0,z.KR)(null),s=()=>new Promise(((e,r)=>{o.value.validate((l=>{0==l?r():e({json:{Server:{ServicePort:+t.form.servicePort,Relay:{SecretKey:t.form.relaySecretKey},SForward:{SecretKey:t.form.sForwardSecretKey,WebPort:+t.form.webPort,TunnelPortRange:[+t.form.tunnelPort1,+t.form.tunnelPort2]},Updater:{SecretKey:t.form.updaterSecretKey},SignIn:{SecretKey:t.form.signinSecretKey}}},form:{server:JSON.parse(JSON.stringify(t.form))}})}))}));return(0,a.sV)((()=>{0==r.value.json.Common.server&&(r.value.step+=r.value.increment)})),{state:t,handleValidate:s,formDom:o}}};const ie=(0,E.A)(me,[["render",de],["__scopeId","data-v-5cebfa33"]]);var fe=ie,ce={components:{Common:ee,Client:se,Server:fe},setup(e){const r=(0,X.B)(),l=(0,z.Kh)({show:0==r.value.config.Common.Install,steps:["选择模式","服务端","客户端","完成"]}),t=(0,z.KR)(null),o=(0,z.KR)({step:1,increment:1,json:{},form:{server:{},client:{},common:{}}});(0,a.Gt)("step",o);const s=()=>{o.value.step--,o.value.increment=-1},u=()=>{o.value.increment=1,t.value.handleValidate().then((e=>{o.value.json=Object.assign(o.value.json,e.json),o.value.form=Object.assign(o.value.form,e.form),o.value.step++})).catch((()=>{}))},n=()=>{(0,H.ai)(o.value.json).then((()=>{G.nk.success("保存成功")})).catch((()=>{G.nk.error("保存失败")}))};return{state:l,currentDom:t,step:o,handlePrev:s,handleNext:u,handleSave:n}}};const be=(0,E.A)(ce,[["render",J],["__scopeId","data-v-41d4c7eb"]]);var pe=be,ve=l(1387),ge={name:"Index",components:{Head:I,Status:q.A,Install:pe},setup(e){const r=(0,X.B)(),l=(0,ve.rd)(),t=(0,z.KR)(null),o=()=>{(0,a.dY)((()=>{r.value.height=t.value.offsetHeight}))};return(0,a.sV)((()=>{0==r.value.hasAccess("FullManager")&&l.push({name:"NoPermission"}),window.addEventListener("resize",o),o()})),(0,a.hi)((()=>{window.removeEventListener("resize",o)})),{wrap:t}}};const ke=(0,E.A)(ge,[["render",d],["__scopeId","data-v-5ea3415a"]]);var Fe=ke}}]);