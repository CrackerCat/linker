"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[266],{9232:function(e,t,l){l.d(t,{W4:function(){return r},q:function(){return a},uQ:function(){return s}});var n=l(4);const a=e=>(0,n.zG)("relay/SetServers",e),r=()=>(0,n.zG)("relay/Subscribe"),s=e=>(0,n.zG)("relay/Connect",e)},743:function(e,t,l){l.d(t,{Ap:function(){return a},Co:function(){return r},DY:function(){return u},Qs:function(){return c},a9:function(){return o},eX:function(){return i},gz:function(){return d},pY:function(){return s}});var n=l(4);const a=()=>(0,n.zG)("sforwardclient/GetSecretKey"),r=e=>(0,n.zG)("sforwardclient/SetSecretKey",e),s=e=>(0,n.zG)("sforwardclient/get",e),o=()=>(0,n.zG)("sforwardclient/refresh"),d=(e="0")=>(0,n.zG)("sforwardclient/getcount",e),u=e=>(0,n.zG)("sforwardclient/remove",e),c=e=>(0,n.zG)("sforwardclient/add",e),i=e=>(0,n.zG)("sforwardclient/TestLocal",e)},920:function(e,t,l){l.d(t,{BJ:function(){return c},NS:function(){return s},UB:function(){return p},Vk:function(){return u},aP:function(){return h},ir:function(){return d},lJ:function(){return r},mK:function(){return a},y2:function(){return i},yN:function(){return o}});var n=l(4);const a=(e="0")=>(0,n.zG)("updaterclient/get",e),r=e=>(0,n.zG)("updaterclient/confirm",e),s=e=>(0,n.zG)("updaterclient/exit",e),o=()=>(0,n.zG)("updaterclient/GetSecretKey"),d=e=>(0,n.zG)("updaterclient/SetSecretKey",e),u=()=>(0,n.zG)("updaterclient/getcurrent"),c=()=>(0,n.zG)("updaterclient/getserver"),i=e=>(0,n.zG)("updaterclient/confirmserver",e),h=()=>(0,n.zG)("updaterclient/exitserver"),p=()=>(0,n.zG)("updaterclient/Subscribe")},5266:function(e,t,l){l.r(t),l.d(t,{default:function(){return te}});var n=l(6768);const a={key:0,class:"servers-wrap"};function r(e,t,l,r,s,o){const d=(0,n.g2)("SignInServers"),u=(0,n.g2)("el-tab-pane"),c=(0,n.g2)("Groups"),i=(0,n.g2)("Async"),h=(0,n.g2)("el-tabs");return r.hasConfig?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(h,{type:"border-card",style:{width:"100%"},modelValue:r.state.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>r.state.tab=e)},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"信标服务器",name:"signin"},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1}),(0,n.bF)(u,{label:"分组设置",name:"groups"},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1}),r.hasSync?((0,n.uX)(),(0,n.Wv)(u,{key:0,label:"配置同步",name:"async"},{default:(0,n.k6)((()=>[(0,n.bF)(i)])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue"])])):(0,n.Q3)("",!0)}var s=l(144),o=l(3830),d=l(4232);const u={class:"flex"},c=(0,n.Lk)("span",null,"服务器地址。ip:端口 或者 域名:端口",-1),i={class:"flex"},h=(0,n.Lk)("span",null,"密钥正确时可连接服务器",-1),p={class:"t-c"};function g(e,t,l,a,r,s){const o=(0,n.g2)("el-input"),g=(0,n.g2)("el-form-item"),m=(0,n.g2)("RelayServers"),f=(0,n.g2)("SForward"),k=(0,n.g2)("Updater"),b=(0,n.g2)("el-form"),v=(0,n.g2)("el-button"),w=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",{class:"signin-wrap",style:(0,d.Tr)({height:`${a.state.height}px`})},[(0,n.bF)(w,{shadow:"never"},{header:(0,n.k6)((()=>[(0,n.eW)("服务器相关设置")])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",p,[(0,n.bF)(v,{type:"success",onClick:a.handleSave},{default:(0,n.k6)((()=>[(0,n.eW)("确定更改")])),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(b,{"label-width":"auto"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"服务器地址"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",u,[(0,n.bF)(o,{class:"flex-1",modelValue:a.state.list.Host,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.list.Host=e),onChange:a.handleSave},null,8,["modelValue","onChange"]),c])])),_:1}),(0,n.bF)(g,{label:"信标密钥"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",i,[(0,n.bF)(o,{class:"flex-1",type:"password","show-password":"",maxlength:"36",modelValue:a.state.list.SecretKey,"onUpdate:modelValue":t[1]||(t[1]=e=>a.state.list.SecretKey=e),onChange:a.handleSave},null,8,["modelValue","onChange"]),h])])),_:1}),(0,n.bF)(m),(0,n.bF)(f),(0,n.bF)(k)])),_:1})])])),_:1})],4)}var m=l(9299),f=l(1219);const k={class:"flex"},b=(0,n.Lk)("span",null,"密钥正确时可使用内网穿透",-1);function v(e,t,l,a,r,s){const o=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item");return(0,n.uX)(),(0,n.Wv)(d,{label:"服务器穿透密钥"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",k,[(0,n.bF)(o,{class:"flex-1",type:"password","show-password":"",modelValue:a.state.SForwardSecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.SForwardSecretKey=e),maxlength:"36",onBlur:a.handleChange},null,8,["modelValue","onBlur"]),b])])),_:1})}var w=l(743),y={setup(e){const t=(0,s.Kh)({SForwardSecretKey:""}),l=()=>{(0,w.Ap)().then((e=>{t.SForwardSecretKey=e}))},a=()=>{t.SForwardSecretKey&&(0,w.Co)(t.SForwardSecretKey).then((()=>{f.nk.success("已操作")})).catch((()=>{f.nk.error("操作失败")}))},r=()=>{a()};return(0,n.sV)((()=>{l()})),{state:t,handleChange:r}}},C=l(1241);const S=(0,C.A)(y,[["render",v]]);var F=S;const _={class:"flex"},V=(0,n.Lk)("span",null,"密钥正确时可更新服务端",-1);function K(e,t,l,a,r,s){const o=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item");return(0,n.uX)(),(0,n.Wv)(d,{label:"服务器更新密钥"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",_,[(0,n.bF)(o,{class:"flex-1",type:"password","show-password":"",modelValue:a.state.secretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.secretKey=e),maxlength:"36",onBlur:a.handleChange},null,8,["modelValue","onBlur"]),V])])),_:1})}var z=l(920),E={setup(e){const t=(0,s.Kh)({secretKey:""}),l=()=>{(0,z.yN)().then((e=>{t.secretKey=e}))},a=()=>{t.secretKey&&(0,z.ir)(t.secretKey).then((()=>{f.nk.success("已操作")})).catch((()=>{f.nk.error("操作失败")}))},r=()=>{a()};return(0,n.sV)((()=>{l()})),{state:t,handleChange:r}}};const G=(0,C.A)(E,[["render",K]]);var B=G;const W={key:0},x={key:1};function U(e,t,l,a,r,s){const o=(0,n.g2)("el-input"),u=(0,n.g2)("el-checkbox"),c=(0,n.g2)("el-form-item"),i=(0,n.g2)("el-table-column"),h=(0,n.g2)("el-switch"),p=(0,n.g2)("el-table"),g=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(c,{label:"中继密钥"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{type:"password","show-password":"",modelValue:a.state.list.SecretKey,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.list.SecretKey=e),maxlength:"36",onChange:a.handleSave},null,8,["modelValue","onChange"]),(0,n.bF)(u,{modelValue:a.state.list.SSL,"onUpdate:modelValue":t[1]||(t[1]=e=>a.state.list.SSL=e),label:"使用ssl",size:"large",onChange:a.handleSave},null,8,["modelValue","onChange"]),(0,n.bF)(u,{modelValue:a.state.list.Disabled,"onUpdate:modelValue":t[2]||(t[2]=e=>a.state.list.Disabled=e),label:"禁用中继",size:"large",onChange:a.handleSave},null,8,["modelValue","onChange"]),(0,n.Lk)("a",{href:"javascript:;",onClick:t[3]||(t[3]=e=>a.state.show=!0),class:(0,d.C4)(["delay a-line",{red:0==a.state.nodes.length,green:a.state.nodes.length>0}])}," 中继节点 : "+(0,d.v_)(a.state.nodes.length),3)])),_:1}),(0,n.bF)(g,{modelValue:a.state.show,"onUpdate:modelValue":t[4]||(t[4]=e=>a.state.show=e),title:"中继节点",width:"600",top:"2vh"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(p,{data:a.state.nodes,size:"small",border:"",height:"500"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{property:"Name",label:"名称"}),(0,n.bF)(i,{property:"MaxBandwidth",label:"连接带宽",width:"100"},{default:(0,n.k6)((e=>[65535==e.row.MaxBandwidth?((0,n.uX)(),(0,n.CE)("span",W,"无限制")):((0,n.uX)(),(0,n.CE)("span",x,(0,d.v_)(e.row.MaxBandwidth)+"Mbps",1))])),_:1}),(0,n.bF)(i,{property:"ConnectionRatio",label:"连接数",width:"100"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,d.v_)(100*e.row.ConnectionRatio)+"%",1)])),_:1}),(0,n.bF)(i,{property:"Delay",label:"延迟",width:"100"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,d.v_)(e.row.Delay)+"ms",1)])),_:1}),(0,n.bF)(i,{property:"Public",label:"公开",width:"60"},{default:(0,n.k6)((e=>[(0,n.bF)(h,{disabled:"",modelValue:e.row.Public,"onUpdate:modelValue":t=>e.row.Public=t,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])],64)}var I=l(9232),A={setup(e){const t=(0,o.B)(),l=(0,s.Kh)({list:t.value.config.Client.Relay.Server,show:!1,nodes:[],timer:0});(0,n.wB)((()=>t.value.config.Client.Relay.Server),(()=>{l.list.Delay=t.value.config.Client.Relay.Server.Delay}));const a=()=>{(0,I.q)(l.list).then((()=>{f.nk.success("已操作")})).catch((()=>{f.nk.error("操作失败")}))},r=()=>{(0,I.W4)().then((e=>{l.nodes=e,l.timer=setTimeout(r,1e3)})).catch((()=>{l.timer=setTimeout(r,1e3)}))};return(0,n.sV)((()=>{r()})),(0,n.hi)((()=>{clearTimeout(l.timer)})),{state:l,handleSave:a}}};const L=(0,C.A)(A,[["render",U],["__scopeId","data-v-d638d1b8"]]);var X=L,P={components:{SForward:F,Updater:B,RelayServers:X},setup(e){const t=(0,o.B)(),l=(0,s.Kh)({list:t.value.config.Client.ServerInfo,height:(0,n.EW)((()=>t.value.height-90))}),a=()=>{(0,m.jU)(l.list).then((()=>{f.nk.success("已操作")})).catch((()=>{f.nk.error("操作失败")}))};return{state:l,handleSave:a}}};const D=(0,C.A)(P,[["render",g]]);var N=D;function R(e,t,l,a,r,s){const o=(0,n.g2)("el-input"),u=(0,n.g2)("el-table-column"),c=(0,n.g2)("Delete"),i=(0,n.g2)("el-icon"),h=(0,n.g2)("el-button"),p=(0,n.g2)("el-popconfirm"),g=(0,n.g2)("Plus"),m=(0,n.g2)("el-table");return(0,n.uX)(),(0,n.Wv)(m,{stripe:"",data:a.state.list,border:"",size:"small",width:"100%",height:`${a.state.height}px`,onCellDblclick:a.handleCellClick},{default:(0,n.k6)((()=>[(0,n.bF)(u,{prop:"Name",label:"名称",width:"100"},{default:(0,n.k6)((e=>[e.row.NameEditing?((0,n.uX)(),(0,n.Wv)(o,{key:0,autofocus:"",size:"small",modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t,onBlur:t=>a.handleEditBlur(e.row,"Name")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,d.v_)(e.row.Name),1)],64))])),_:1}),(0,n.bF)(u,{prop:"Id",label:"Id"},{default:(0,n.k6)((e=>[e.row.IdEditing?((0,n.uX)(),(0,n.Wv)(o,{key:0,autofocus:"",size:"small",modelValue:e.row.Id,"onUpdate:modelValue":t=>e.row.Id=t,onBlur:t=>a.handleEditBlur(e.row,"Id")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,d.v_)(e.row.Id),1)],64))])),_:1}),(0,n.bF)(u,{prop:"Password",label:"密码"},{default:(0,n.k6)((e=>[e.row.PasswordEditing?((0,n.uX)(),(0,n.Wv)(o,{key:0,type:"password","show-password":"",size:"small",modelValue:e.row.Password,"onUpdate:modelValue":t=>e.row.Password=t,onBlur:t=>a.handleEditBlur(e.row,"Password")},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,d.v_)(e.row.Password.replace(/.{1}/g,"*")),1)],64))])),_:1}),(0,n.bF)(u,{prop:"Oper",label:"操作",width:"110"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,[(0,n.bF)(p,{title:"删除不可逆，是否确认?",onConfirm:t=>a.handleDel(e.$index)},{reference:(0,n.k6)((()=>[(0,n.bF)(h,{type:"danger",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1})])),_:1})])),_:2},1032,["onConfirm"]),(0,n.bF)(h,{type:"primary",size:"small",onClick:t=>a.handleAdd(e.$index)},{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(g)])),_:1})])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","height","onCellDblclick"])}var T=l(7477),$={components:{Delete:T.epd,Plus:T.FWt,Select:T.l6P},setup(e){const t=(0,o.B)(),l=(0,s.Kh)({list:t.value.config.Client.Groups||[],height:(0,n.EW)((()=>t.value.height-90))});(0,n.wB)((()=>t.value.config.Client.Groups),(()=>{0==l.list.filter((e=>e["__editing"])).length&&(l.list=t.value.config.Client.Groups)}));const a=(e,t)=>{r(e,t.property)},r=(e,t)=>{l.list.forEach((e=>{e["NameEditing"]=!1,e["IdEditing"]=!1,e["PasswordEditing"]=!1})),e[`${t}Editing`]=!0,e["__editing"]=!0},d=(e,t)=>{e[`${t}Editing`]=!1,e["__editing"]=!1,i()},u=e=>{l.list.splice(e,1),i()},c=e=>{l.list.filter((e=>""==e.Id||""==e.Name)).length>0||(l.list.splice(e+1,0,{Name:"",Id:"",Password:""}),i())},i=()=>{(0,m.zp)(l.list).then((()=>{f.nk.success("已操作")})).catch((()=>{f.nk.error("操作失败")}))};return{state:l,handleCellClick:a,handleEditBlur:d,handleDel:u,handleAdd:c}}};const M=(0,C.A)($,[["render",R]]);var Q=M;const j={class:"t-c"};function q(e,t,l,a,r,s){const o=(0,n.g2)("el-checkbox"),u=(0,n.g2)("el-col"),c=(0,n.g2)("el-row"),i=(0,n.g2)("el-checkbox-group"),h=(0,n.g2)("el-button"),p=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",{style:(0,d.Tr)({height:`${a.state.height}px`})},[(0,n.bF)(p,{shadow:"never"},{header:(0,n.k6)((()=>[(0,n.eW)("选择你需要同步的项，将这些配置同步到本组所有客户端")])),footer:(0,n.k6)((()=>[(0,n.Lk)("div",j,[(0,n.bF)(h,{type:"success",onClick:a.handleSync},{default:(0,n.k6)((()=>[(0,n.eW)("确定同步")])),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(o,{modelValue:a.state.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>a.state.checkAll=e),indeterminate:a.state.isIndeterminate,onChange:a.handleCheckAllChange},{default:(0,n.k6)((()=>[(0,n.eW)("全选")])),_:1},8,["modelValue","indeterminate","onChange"]),(0,n.bF)(i,{modelValue:a.state.checkeds,"onUpdate:modelValue":t[1]||(t[1]=e=>a.state.checkeds=e),onChange:a.handleCheckedsChange},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.state.names,(e=>((0,n.uX)(),(0,n.Wv)(u,{span:8},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(o,{key:e.name,label:e.label,value:e.name},{default:(0,n.k6)((()=>[(0,n.eW)((0,d.v_)(e.label),1)])),_:2},1032,["label","value"]))])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue","onChange"])])])),_:1})],4)}var H=l(8835),J={label:"同步配置",name:"async",order:7,setup(e){const t=(0,o.B)(),l=(0,s.Kh)({names:[],checkAll:!1,isIndeterminate:!1,checkeds:[],height:(0,n.EW)((()=>t.value.height-90))}),a=e=>{l.checkeds=e?l.names.map((e=>e.name)):[],l.isIndeterminate=!1},r=e=>{const t=e.length;l.checkAll=t===l.names.length,l.isIndeterminate=t>0&&t<l.names.length},d={SignInSecretKey:"当前信标密钥",GroupSecretKey:"当前分组密码",RelaySecretKey:"当前中继密钥",SForwardSecretKey:"当前服务器穿透密钥",UpdaterSecretKey:"服务器更新密钥",TunnelTransports:"打洞协议列表"};(0,n.sV)((()=>{(0,H.Iv)().then((e=>{l.names=e.map((e=>({name:e,label:d[e]})))}))}));const u=()=>{0!=l.checkeds.length?(0,H.E1)(l.checkeds).then((e=>{f.nk.success("已操作")})):f.nk.error("至少选择一个")};return{state:l,handleCheckAllChange:a,handleCheckedsChange:r,handleSync:u}}};const Y=(0,C.A)(J,[["render",q]]);var O=Y,Z={components:{SignInServers:N,Groups:Q,Async:O},setup(e){const t=(0,o.B)(),l=(0,n.EW)((()=>t.value.hasAccess("Config"))),a=(0,n.EW)((()=>t.value.hasAccess("Sync"))),r=(0,s.Kh)({tab:"signin"});return{state:r,hasConfig:l,hasSync:a}}};const ee=(0,C.A)(Z,[["render",r],["__scopeId","data-v-11926c68"]]);var te=ee}}]);