"use strict";(self["webpackChunklinker_web"]=self["webpackChunklinker_web"]||[]).push([[66],{920:function(e,t,a){a.d(t,{BJ:function(){return c},NS:function(){return o},Vk:function(){return u},aP:function(){return p},ir:function(){return r},lJ:function(){return s},mK:function(){return l},y2:function(){return d},yN:function(){return i}});var n=a(4);const l=(e="0")=>(0,n.zG)("updaterclient/get",e),s=e=>(0,n.zG)("updaterclient/confirm",e),o=e=>(0,n.zG)("updaterclient/exit",e),i=()=>(0,n.zG)("updaterclient/GetSecretKey"),r=e=>(0,n.zG)("updaterclient/SetSecretKey",e),u=()=>(0,n.zG)("updaterclient/getcurrent"),c=()=>(0,n.zG)("updaterclient/getserver"),d=e=>(0,n.zG)("updaterclient/confirmserver",e),p=()=>(0,n.zG)("updaterclient/exitserver")},9383:function(e,t,a){a.d(t,{T:function(){return u},d:function(){return r}});var n=a(920),l=a(3830),s=a(144),o=a(6768);const i=Symbol(),r=()=>{const e=(0,l.B)(),t=(0,s.KR)({timer:0,list:{},hashcode:0,current:{Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0}});(0,o.Gt)(i,t);const a=()=>{(0,n.mK)(t.value.hashcode.toString()).then((n=>{if(t.value.hashcode=n.HashCode,n.List){const a=Object.values(n.List).filter((e=>!!e.Version))[0];a&&(Object.assign(t.value.current,{DateTime:a.DateTime,Version:a.Version,Status:a.Status,Length:a.Length,Current:a.Current,Msg:a.Msg}),e.value.updater=t.value.current),t.value.list=n.List}t.value.timer=setTimeout(a,800)})).catch((()=>{t.value.timer=setTimeout(a,800)}))},r=()=>{clearTimeout(t.value.timer)};return{updater:t,_getUpdater:a,clearUpdaterTimeout:r}},u=()=>(0,o.WQ)(i)},1699:function(e,t,a){a.d(t,{A:function(){return d}});var n=a(6768);function l(e,t,a,l,s,o){const i=(0,n.g2)("el-checkbox"),r=(0,n.g2)("el-col"),u=(0,n.g2)("el-row"),c=(0,n.g2)("el-checkbox-group");return(0,n.uX)(),(0,n.Wv)(c,{modelValue:l.state.checkList,"onUpdate:modelValue":t[0]||(t[0]=e=>l.state.checkList=e)},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.access,((e,t)=>((0,n.uX)(),(0,n.Wv)(r,{key:t,span:8},{default:(0,n.k6)((()=>[(0,n.bF)(i,{value:e.Value,label:e.Text},null,8,["value","label"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])}a(4114);var s=a(144),o=a(3830),i=a(8835),r={props:["machineid"],setup(e){const t=(0,o.B)(),a=(0,n.EW)((()=>{const e=t.value.config.Client.Accesss;return Object.keys(e).reduce(((a,n,l)=>{if(t.value.hasAccess(n)){const t=e[n];t.Key=n,a.push(t)}return a}),[])})),l=(0,s.Kh)({checkList:[t.value.config.Client.Accesss.Api.Value,t.value.config.Client.Accesss.Web.Value,t.value.config.Client.Accesss.NetManager.Value]}),r=()=>l.checkList.reduce(((e,t)=>(e|t)>>>0),0);return(0,n.sV)((()=>{e.machineid!=t.value.config.Client.Id&&(0,i.QI)(e.machineid).then((e=>{l.checkList=a.value.reduce(((t,a)=>((e&a.Value)>>>0==a.Value&&t.push(a.Value),t)),[])})).catch((()=>{}))})),{state:l,access:a,getValue:r}}},u=a(1241);const c=(0,u.A)(r,[["render",l],["__scopeId","data-v-d5958228"]]);var d=c},2126:function(e,t,a){a.d(t,{A:function(){return b}});var n=a(6768),l=a(4232);const s=["title"],o={key:0,class:"progress"},i={key:1,class:"progress"};function r(e,t,a,r,u,c){const d=(0,n.g2)("Loading"),p=(0,n.g2)("el-icon"),v=(0,n.g2)("Download"),g=(0,n.g2)("CircleCheck");return(0,n.uX)(),(0,n.CE)("a",{href:"javascript:;",class:(0,l.C4)(["download",r.updaterColor]),onClick:t[0]||(t[0]=e=>r.handleUpdate()),title:r.updaterText},[(0,n.Lk)("span",null,[(0,n.Lk)("span",null,(0,l.v_)(r.item.Version),1),r.updater.list[r.item.MachineId]?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[1==r.updater.list[r.item.MachineId].Status?((0,n.uX)(),(0,n.Wv)(p,{key:0,size:"14",class:"loading"},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1})):2==r.updater.list[r.item.MachineId].Status?((0,n.uX)(),(0,n.Wv)(p,{key:1,size:"14"},{default:(0,n.k6)((()=>[(0,n.bF)(v)])),_:1})):3==r.updater.list[r.item.MachineId].Status||5==r.updater.list[r.item.MachineId].Status?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.bF)(p,{size:"14",class:"loading"},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1}),0==r.updater.list[r.item.MachineId].Length?((0,n.uX)(),(0,n.CE)("span",o,"0%")):((0,n.uX)(),(0,n.CE)("span",i,(0,l.v_)(parseInt(r.updater.list[r.item.MachineId].Current/r.updater.list[r.item.MachineId].Length*100))+"%",1))],64)):6==r.updater.list[r.item.MachineId].Status?((0,n.uX)(),(0,n.Wv)(p,{key:3,size:"14",class:"yellow"},{default:(0,n.k6)((()=>[(0,n.bF)(g)])),_:1})):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.Wv)(p,{key:1,size:"14"},{default:(0,n.k6)((()=>[(0,n.bF)(v)])),_:1}))])],10,s)}a(4114);var u=a(3830),c=a(144),d=a(1219),p=a(2933),v=a(2248),g=a(920),h=a(7477),m=a(9383),f={props:["item","config"],components:{Download:h.f5X,Loading:h.Rhj,CircleCheck:h.rW7},setup(e){const t=(0,u.B)(),a=(0,n.EW)((()=>t.value.hasAccess("UpdateSelf"))),l=(0,n.EW)((()=>t.value.hasAccess("UpdateOther"))),s=(0,m.T)(),o=(0,n.EW)((()=>t.value.signin.Version)),i=(0,n.EW)((()=>s.value.current.Version)),r=(0,n.EW)((()=>`${i.value}->${s.value.current.DateTime}\n${s.value.current.Msg.map(((e,t)=>`${t+1}、${e}`)).join("\n")}`)),h=(0,n.EW)((()=>s.value.list[e.item.MachineId]?s.value.list[e.item.MachineId].Status<=2?e.item.Version!=o.value?`与服务器版本(${o.value})不一致，建议更新`:i.value!=e.item.Version?`不是最新版本(${i.value})，建议更新\n${r.value}`:`是最新版本，但我无法阻止你喜欢更新\n${r.value}`:{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[s.value.list[e.item.MachineId].Status]:"未检测到更新")),f=(0,n.EW)((()=>e.item.Version!=o.value?"red":s.value.list[e.item.MachineId]&&i.value!=e.item.Version?"yellow":"green")),k=()=>{if(!e.config)return;if(!a.value)return;const t=s.value.list[e.item.MachineId];if(t)if([0,1,3,5].indexOf(t.Status)>=0)d.nk.error("操作中，请稍后!");else if(6!=t.Status){if(2==t.Status){const t=(0,c.KR)(i.value),a=[(0,n.h)(v.P9,{label:`仅[${e.item.MachineName}] -> ${i.value}(最新版本)`,value:i.value})];e.config&&l.value&&a.push((0,n.h)(v.P9,{label:`[所有] -> ${i.value}(最新版本)`,value:`all->${i.value}`})),e.item.Version!=o.value&&i.value!=o.value&&(a.push((0,n.h)(v.P9,{label:`仅[${e.item.MachineName}] -> ${o.value}(服务器版本)`,value:o.value})),e.config&&l.value&&a.push((0,n.h)(v.P9,{label:`[所有] -> ${o.value}(服务器版本)`,value:`all->${o.value}`}))),(0,p.s)({title:"选择版本",message:()=>(0,n.h)(v.AV,{modelValue:t.value,placeholder:"请选择",style:"width:20rem;","onUpdate:modelValue":e=>{t.value=e}},a),confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{const a={MachineId:e.item.MachineId,Version:t.value.replace("all->",""),All:t.value.indexOf("all->")>=0};a.All&&(a.MachineId=""),(0,g.lJ)(a)})).catch((()=>{}))}}else p.s.confirm("确定关闭程序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{exit(e.item.MachineId)})).catch((()=>{}));else d.nk.error("未检测到更新")};return{item:(0,n.EW)((()=>e.item)),updater:s,updaterText:h,updaterColor:f,handleUpdate:k}}},k=a(1241);const C=(0,k.A)(f,[["render",r],["__scopeId","data-v-56d38c60"]]);var b=C},1474:function(e,t,a){a.d(t,{A:function(){return ie}});var n=a(6768),l=a(4232),s=a.p+"img/memory.a28433e5.svg",o=a.p+"img/wechat.5c371c5d.jpg",i=a.p+"img/alipay.ff9b1e7c.jpg";const r=e=>((0,n.Qi)("data-v-26d15c40"),e=e(),(0,n.jt)(),e),u={class:"status-wrap flex"},c={class:"copy"},d=r((()=>(0,n.Lk)("img",{src:s,alt:"memory"},null,-1))),p=r((()=>(0,n.Lk)("span",null,"赞助",-1))),v=[d,p],g={href:"https://github.com/snltty/linker",target:"_blank"},h=r((()=>(0,n.Lk)("div",{class:"flex-1"},null,-1))),m={class:"export"},f={class:"api"},k={class:"server"},C=r((()=>(0,n.Lk)("div",{class:"pay"},[(0,n.Lk)("img",{src:o,alt:""}),(0,n.Lk)("img",{src:i,alt:""})],-1)));function b(e,t,a,s,o,i){const r=(0,n.g2)("Export"),d=(0,n.g2)("Api"),p=(0,n.g2)("Server"),b=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",c,[(0,n.Lk)("a",{href:"javascript:;",class:"memory",title:"赞助一笔，让作者饱餐一顿",onClick:t[0]||(t[0]=e=>s.state.showPay=!0)},v),(0,n.Lk)("a",g,"snltty©linker "+(0,l.v_)(s.self.Version),1)]),h,(0,n.Lk)("div",m,[(0,n.bF)(r,{config:s.config},null,8,["config"])]),(0,n.Lk)("div",f,[(0,n.bF)(d,{config:s.config},null,8,["config"])]),(0,n.Lk)("div",k,[(0,n.bF)(p,{config:s.config},null,8,["config"])]),(0,n.bF)(b,{modelValue:s.state.showPay,"onUpdate:modelValue":t[1]||(t[1]=e=>s.state.showPay=e),title:"赞助linker",width:"300",top:"1vh"},{default:(0,n.k6)((()=>[C])),_:1},8,["modelValue"])])}var w=a(144);const V={href:"javascript:;",title:"此设备的管理接口"};function y(e,t,a,s,o,i){const r=(0,n.g2)("Tools"),u=(0,n.g2)("el-icon"),c=(0,n.g2)("el-popconfirm");return s.config?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,l.C4)(["status-api-wrap",{connected:s.connected}])},[(0,n.bF)(c,{"confirm-button-text":"清除","cancel-button-text":"更改",title:"确定你的操作？",onCancel:s.handleShow,onConfirm:s.handleResetConnect},{reference:(0,n.k6)((()=>[(0,n.Lk)("a",V,[(0,n.bF)(u,{size:"16"},{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1}),(0,n.eW)(" 管理接口 ")])])),_:1},8,["onCancel","onConfirm"])],2)):(0,n.Q3)("",!0)}var S=a(3830),L=a(4),_=a(7477),F={components:{Tools:_.S0q},props:["config"],setup(e){const t=(0,S.B)(),a=(0,n.EW)((()=>t.value.api.connected)),l=()=>{localStorage.setItem("api-cache",""),window.location.reload()},s=()=>{(0,L.e3)(),(0,L.a1)(`ws://${window.location.hostname}:12345`,"snltty")};return{config:e.config,connected:a,handleShow:s,handleResetConnect:l}}},x=a(1241);const E=(0,x.A)(F,[["render",y],["__scopeId","data-v-4470fcde"]]);var W=E;const I=["title"],T={key:0,class:"progress"},A={key:1,class:"progress"},M={class:"dialog-footer t-c"};function $(e,t,a,s,o,i){const r=(0,n.g2)("Promotion"),u=(0,n.g2)("el-icon"),c=(0,n.g2)("Loading"),d=(0,n.g2)("Download"),p=(0,n.g2)("CircleCheck"),v=(0,n.g2)("el-input"),g=(0,n.g2)("el-form-item"),h=(0,n.g2)("el-form"),m=(0,n.g2)("el-button"),f=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:(0,l.C4)(["status-server-wrap",{connected:s.state.connected}])},[(0,n.Lk)("a",{href:"javascript:;",title:"更改你的连接设置",onClick:t[0]||(t[0]=(...e)=>s.handleConfig&&s.handleConfig(...e))},[(0,n.bF)(u,{size:"16"},{default:(0,n.k6)((()=>[(0,n.bF)(r)])),_:1}),(0,n.eW)(" 信标服务器")]),(0,n.Lk)("a",{href:"javascript:;",title:"服务端的程序版本",onClick:t[1]||(t[1]=(...e)=>s.handleUpdate&&s.handleUpdate(...e)),class:(0,l.C4)(["download",s.updateColor()])},[(0,n.Lk)("span",null,(0,l.v_)(s.state.version),1),s.updaterCurrent.Version?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[1==s.updaterCurrent.Status?((0,n.uX)(),(0,n.Wv)(u,{key:0,size:"14",class:"loading"},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1})):2==s.updaterServer.Status?((0,n.uX)(),(0,n.Wv)(u,{key:1,size:"14"},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1})):3==s.updaterServer.Status||5==s.updaterServer.Status?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.bF)(u,{size:"14",class:"loading"},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1}),0==s.updaterServer.Length?((0,n.uX)(),(0,n.CE)("span",T,"0%")):((0,n.uX)(),(0,n.CE)("span",A,(0,l.v_)(parseInt(s.updaterServer.Current/s.updaterServer.Length*100))+"%",1))],64)):6==s.updaterServer.Status?((0,n.uX)(),(0,n.Wv)(u,{key:3,size:"14",class:"yellow"},{default:(0,n.k6)((()=>[(0,n.bF)(p)])),_:1})):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.Wv)(u,{key:1,size:"14"},{default:(0,n.k6)((()=>[(0,n.bF)(d)])),_:1}))],10,I)],2),(0,n.bF)(f,{modelValue:s.state.show,"onUpdate:modelValue":t[5]||(t[5]=e=>s.state.show=e),title:"连接设置",width:"300"},{footer:(0,n.k6)((()=>[(0,n.Lk)("div",M,[(0,n.bF)(m,{onClick:t[4]||(t[4]=e=>s.state.show=!1),loading:s.state.loading},{default:(0,n.k6)((()=>[(0,n.eW)("取消")])),_:1},8,["loading"]),(0,n.bF)(m,{type:"primary",onClick:s.handleSave,loading:s.state.loading},{default:(0,n.k6)((()=>[(0,n.eW)("确定保存")])),_:1},8,["onClick","loading"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(h,{model:s.state.form,rules:s.state.rules,"label-width":"6rem"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"机器名",prop:"name"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{modelValue:s.state.form.name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.state.form.name=e),maxlength:"12","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,n.bF)(g,{label:"分组名",prop:"groupid"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{modelValue:s.state.form.groupid,"onUpdate:modelValue":t[3]||(t[3]=e=>s.state.form.groupid=e),type:"password","show-password":"",maxlength:"36","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"])],64)}var X=a(9299),z=a(1219),U=a(2933),K=a(920),j={components:{Promotion:_.Yk4,Download:_.f5X,Loading:_.Rhj,CircleCheck:_.rW7},props:["config"],setup(e){const t=(0,S.B)(),a=(0,n.EW)((()=>t.value.hasAccess("Config"))),l=(0,n.EW)((()=>t.value.hasAccess("UpdateServer"))),s=(0,w.KR)({Version:"",Msg:[],DateTime:"",Status:0,Length:0,Current:0}),o=(0,w.KR)({Version:"",Status:0,Length:0,Current:0}),i=(0,n.EW)((()=>`${s.value.Version}->${s.value.DateTime}\n${s.value.Msg.map(((e,t)=>`${t+1}、${e}`)).join("\n")}`)),r=(0,w.Kh)({show:!1,loading:!1,connected:(0,n.EW)((()=>t.value.signin.Connected)),version:(0,n.EW)((()=>t.value.signin.Version)),form:{name:t.value.config.Client.Name,groupid:t.value.config.Client.GroupId},rules:{}}),u=()=>{(0,K.Vk)().then((e=>{s.value.DateTime=e.DateTime,s.value.Version=e.Version,s.value.Status=e.Status,s.value.Length=e.Length,s.value.Current=e.Current,s.value.Msg=e.Msg,setTimeout((()=>{u()}),1e3)})).catch((()=>{setTimeout((()=>{u()}),1e3)}))},c=()=>{(0,K.BJ)().then((e=>{o.value.Version=e.Version,o.value.Status=e.Status,o.value.Length=e.Length,o.value.Current=e.Current,o.value.Status>2&&o.value.Status<6&&setTimeout((()=>{c()}),1e3)})).catch((()=>{setTimeout((()=>{c()}),1e3)}))},d=()=>s.value.Version?o.value.Status<=2?r.version!=s.value.Version?`不是最新版本(${s.value.Version})，建议更新\n${i.value}`:`是最新版本，但我无法阻止你喜欢更新\n${i.value}`:{3:"正在下载",4:"已下载",5:"正在解压",6:"已解压，请重启"}[o.value.Status]:"未检测到更新",p=()=>r.version!=s.value.Version?"yellow":"green",v=()=>{e.config&&l.value&&(s.value.Version?[0,1,3,5].indexOf(o.value.Status)>=0?z.nk.error("操作中，请稍后!"):6!=o.value.Status?2==s.value.Status&&U.s.confirm("确定更新服务端吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,K.y2)(s.value.Version).then((()=>{setTimeout((()=>{c()}),1e3)}))})).catch((()=>{})):U.s.confirm("确定关闭服务端吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,K.aP)()})).catch((()=>{})):z.nk.error("未检测到更新"))},g=()=>{e.config&&a.value&&(r.form.name=t.value.config.Client.Name,r.form.groupid=t.value.config.Client.GroupId,r.show=!0)},h=()=>{r.loading=!0,(0,X.rd)(r.form).then((()=>{r.loading=!1,r.show=!1,z.nk.success("已操作")})).catch((e=>{r.loading=!1,z.nk.success("操作失败!")}))};return(0,n.sV)((()=>{u(),c()})),{config:e.config,state:r,handleConfig:g,handleSave:h,updaterCurrent:s,updaterServer:o,handleUpdate:v,updateText:d,updateColor:p}}};const B=(0,x.A)(j,[["render",$],["__scopeId","data-v-360b8353"]]);var D=B;const P=e=>((0,n.Qi)("data-v-ebcc59f4"),e=e(),(0,n.jt)(),e),G={key:0,class:"status-export-wrap"},N={class:"port-wrap"},R=P((()=>(0,n.Lk)("div",{class:"text"}," 导出配置，作为子设备运行，如果使用docker，容器映射configs文件夹即可 ",-1))),O={class:"body"},Q={class:"card-header flex"},J={style:{"margin-left":"2rem"}},Y=P((()=>(0,n.Lk)("span",null,"设备名 : ",-1))),q=P((()=>(0,n.Lk)("span",null,"管理密码 : ",-1)));function H(e,t,a,l,s,o){const i=(0,n.g2)("Share"),r=(0,n.g2)("el-icon"),u=(0,n.g2)("el-checkbox"),c=(0,n.g2)("el-popover"),d=(0,n.g2)("el-input"),p=(0,n.g2)("Access"),v=(0,n.g2)("el-card"),g=(0,n.g2)("el-button"),h=(0,n.g2)("el-dialog");return l.config&&l.hasExport?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("a",{href:"javascript:;",title:"此设备的管理接口",onClick:t[0]||(t[0]=e=>l.state.show=!0)},[(0,n.bF)(r,{size:"16"},{default:(0,n.k6)((()=>[(0,n.bF)(i)])),_:1}),(0,n.eW)(" 导出配置 ")]),(0,n.bF)(h,{class:"options-center",title:"导出配置","destroy-on-close":"",modelValue:l.state.show,"onUpdate:modelValue":t[5]||(t[5]=e=>l.state.show=e),center:"",width:"580",top:"1vh"},{footer:(0,n.k6)((()=>[(0,n.bF)(g,{plain:"",onClick:t[4]||(t[4]=e=>l.state.show=!1),loading:l.state.loading},{default:(0,n.k6)((()=>[(0,n.eW)("取消")])),_:1},8,["loading"]),(0,n.bF)(g,{type:"success",plain:"",onClick:l.handleExport,loading:l.state.loading},{default:(0,n.k6)((()=>[(0,n.eW)("确定导出")])),_:1},8,["onClick","loading"])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",N,[R,(0,n.Lk)("div",O,[(0,n.bF)(v,{shadow:"never"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Q,[(0,n.Lk)("div",null,[(0,n.bF)(c,{placement:"top-start",title:"tips",width:200,trigger:"hover",content:"这将生成唯一ID，多台设备使用产生冲突，挤压下线"},{reference:(0,n.k6)((()=>[(0,n.bF)(u,{disabled:l.onlyNode,modelValue:l.state.single,"onUpdate:modelValue":t[1]||(t[1]=e=>l.state.single=e),label:"单设备"},null,8,["disabled","modelValue"])])),_:1})]),(0,n.Lk)("div",J,[Y,(0,n.bF)(d,{disabled:!l.state.single,modelValue:l.state.name,"onUpdate:modelValue":t[2]||(t[2]=e=>l.state.name=e),maxlength:"12","show-word-limit":"",style:{width:"14rem"}},null,8,["disabled","modelValue"])]),(0,n.Lk)("div",null,[q,(0,n.bF)(d,{type:"password","show-password":"",disabled:l.onlyNode,modelValue:l.state.apipassword,"onUpdate:modelValue":t[3]||(t[3]=e=>l.state.apipassword=e),maxlength:"36","show-word-limit":"",style:{width:"14rem"}},null,8,["disabled","modelValue"])])])])),default:(0,n.k6)((()=>[(0,n.bF)(p,{ref:"accessDom",machineid:l.machineId},null,8,["machineid"])])),_:1})])])])),_:1},8,["modelValue"])])):(0,n.Q3)("",!0)}var Z=a(8835),ee=a(1699),te={components:{Share:_.SYj,Access:ee.A},props:["config"],setup(e){const t=(0,S.B)(),a=(0,n.EW)((()=>t.value.hasAccess("Export"))),l=(0,n.EW)((()=>t.value.config.Client.OnlyNode)),s=(0,n.EW)((()=>t.value.config.Client.Id)),o=(0,w.Kh)({show:!1,loading:!1,single:!0,name:"",apipassword:t.value.config.Client.CApi.ApiPassword}),i=(0,w.KR)(null),r=()=>{if(!a.value)return;const e={access:i.value.getValue(),single:o.single,name:o.name,apipassword:o.apipassword};if(e.single){if(!e.name)return void z.nk.error("请输入设备名")}else e.name="";if(!e.single||o.name)return e;z.nk.error("请输入管理密码")},u=()=>{const e=document.createElement("a");o.single?e.download=`client-node-export-${o.name}.zip`:e.download="client-node-export.zip",e.href="/client-node-export.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e)},c=()=>{const e=r();e&&(o.loading=!0,(0,Z.P$)(e).then((()=>{o.loading=!1,o.show=!1,z.nk.success("导出成功"),u()})).catch((()=>{o.loading=!1})))};return{config:e.config,onlyNode:l,hasExport:a,machineId:s,state:o,accessDom:i,handleExport:c}}};const ae=(0,x.A)(te,[["render",H],["__scopeId","data-v-ebcc59f4"]]);var ne=ae,le=a(2126),se={components:{Api:W,Server:D,Export:ne,UpdaterBtn:le.A},props:["config"],setup(e){const t=(0,S.B)(),a=(0,n.EW)((()=>t.value.self)),l=(0,w.Kh)({showPay:!1});return{state:l,config:e.config,self:a}}};const oe=(0,x.A)(se,[["render",b],["__scopeId","data-v-26d15c40"]]);var ie=oe}}]);